---
id: ep-017
title: Task 9 Execution - 研究课题识别
type: episodic
date: 2025-11-13
tags: [task-9, task-completion, research, research-topics, defect-analysis]
links:
  - /claude/prompt/9.research-intensive-analysis.md
  - /claude/result/9/研究课题清单.md
related: [ep-005, ep-007, ep-016]
---

# Task 9 Execution - 研究课题识别

## Goal

执行 Task 9：识别 CPG 缺陷修复所需的研究课题，为每个课题定义研究方向、研究目的和研究要求。

## Background

- **Task 4**: 识别了 30 个 CPG 缺陷
- **Task 5**: 分析了修复缺陷所需的人力资源和技能
- **Task 9 (ep-016)**: 创建了 Task 9 prompt（但有偏差）
- **本次会话**: 用户指出 prompt 偏差，要求修正并执行Task 9

## User Request

用户在执行初期提出修正：

> **原始 prompt 的问题**:
> - ❌ 包含了大量论文引用（54篇论文）
> - ❌ 包含了工具源码分析（Soot, WALA）
> - ❌ 像是"执行研究"的工作量，而不是"识别研究课题"
>
> **用户要求**:
> - ✅ Task 9 只需要识别研究课题
> - ✅ 只需要：研究方向、研究目的、研究要求
> - ✅ 不需要论文列表（由研究人员自行查找）
> - ✅ 重点是覆盖全面，不遗漏任何需要研究的领域

**核心insight**: Task 9 是"规划研究"，而不是"执行研究"。

---

## Actions Taken

### Phase 1: Prompt 修正

**旧 Prompt 结构** (923 lines):
```
1. 问题陈述
2. 研究需求分类（Level 1-4）
3. 核心研究主题（包含 54 篇论文引用）
4. 研究路线图（包含工具参考）
5. 成功标准
6. 执行策略
7. 关键决策点
8. 风险与缓解
9. 附录（BibTeX 引用、工具链接）
```

**新 Prompt 结构** (685 lines):
```
1. 问题陈述
   - 为什么需要识别研究课题
   - 为什么这些知识不被大众所知
   - Task 9 的目标（明确"不包括"论文列表）
2. 缺陷研究难度分级（Level 1-4）
3. 研究课题清单（10 个课题）
   - 每个课题：研究方向 + 研究目的 + 研究要求
   - ❌ 删除所有论文引用
   - ❌ 删除所有工具源码引用
4. 研究课题汇总表
5. 依赖关系图
6. 执行策略（研究执行在 Task 10）
7. 成功标准
8. 风险与注意事项
9. 与其他任务的关系
```

**关键变更**:
- ❌ 删除了 54 篇论文引用
- ❌ 删除了工具源码分析（Soot, WALA, Doop）
- ❌ 删除了"论文引用列表"和"开源工具分析"交付物
- ✅ 聚焦于研究方向、目的、要求
- ✅ 明确Task 9只是"识别课题"，不是"执行研究"

---

### Phase 2: 产出研究课题清单

基于修正后的 prompt，产出交付物：
- **文档**: `/claude/result/9/研究课题清单.md` (450 lines)
- **格式**: 用户友好的研究课题清单（从 prompt 提取精华）
- **内容**:
  - 10 个核心研究课题
  - 每个课题包含：研究方向、研究目的、研究要求、关联缺陷、优先级、依赖关系
  - 汇总表
  - 依赖关系图
  - 并行研究策略（5 名工程师，6-8 周）

---

## Results

### 识别的 10 个研究课题

| 课题 ID | 研究课题 | 关联缺陷 | 优先级 | 依赖关系 | 预计时间 |
|--------|---------|---------|--------|---------|---------|
| **课题 1** | 过程间数据流分析 | D3, D26 | **P0** | 依赖课题 2 | 2-3 周 |
| **课题 2** | 调用图构建 | D4, D19 | **P0** | 无 | 1-2 周 |
| **课题 3** | 别名分析/指针分析 | D9, D25 | P1 | 依赖课题 2 | 2-3 周 |
| **课题 4** | 静态单赋值形式 (SSA) | D8 | P1 | 无 | 1 周 |
| **课题 5** | 路径敏感与符号执行 | D13 | P2 | 依赖课题 4 | 2-3 周 |
| **课题 6** | 异常流分析 | D14 | P2 | 无 | 1 周 |
| **课题 7** | Lambda 和动态特性 | D15 | P2 | 依赖课题 2 | 1-2 周 |
| **课题 8** | 增量分析 | D22 | P2 | 无 | 1-2 周 |
| **课题 9** | 并行分析 | D10 | P1 | 无 | 1-2 周 |
| **课题 10** | Enum Desugaring | D6 | P1 | 无 | 1 周 |

**覆盖缺陷**: 16 个（Level 2 和 Level 3 缺陷）
- Level 2 缺陷: D6, D8, D10, D14, D15, D22
- Level 3 缺陷: D3, D4, D9, D13, D19, D25, D26

**统计**:
- P0 (最高优先级): 2 个课题
- P1 (高优先级): 4 个课题
- P2 (中等优先级): 4 个课题

**研究时间估算**:
- 串行执行: 15-23 周
- 并行执行（5 名工程师）: **6-8 周**

---

### 依赖关系分析

**关键路径**:
```
课题 2 (调用图构建) [1-2周]
  ↓
课题 1 (过程间 DFA) [2-3周]
  ↓
实施 D3 (Interprocedural DFG)
```

**独立课题**（可并行开始）:
- 课题 2 (调用图构建)
- 课题 4 (SSA)
- 课题 6 (异常流分析)
- 课题 9 (并行分析)
- 课题 10 (Enum Desugaring)

**依赖课题 2 的课题**:
- 课题 1 (过程间 DFA)
- 课题 3 (别名分析)
- 课题 7 (Lambda 处理)

**依赖课题 4 的课题**:
- 课题 5 (符号执行)

---

## Key Insights and Observations

### Insight 1: 识别研究课题 ≠ 执行研究

**错误理解**（初始版本）:
- Task 9 需要产出：详细的研究报告（9.1-9.5）+ 论文摘要 + 算法对比 + CPG 集成方案
- 这实际上是"执行研究"的工作量（需要数周）

**正确理解**（修正后）:
- Task 9 只需要产出：研究课题清单 + 每个课题的研究范围 + 必读论文列表 + 研究优先级
- 这是"规划研究"，而不是"执行研究"

**教训**:
- **任务名称**很重要："研究课题识别" ≠ "研究执行"
- **交付物定义**必须明确：是"课题清单"还是"研究报告"？
- **AI Agent 容易过度工作**：倾向于做得太详细，需要用户及时纠正

---

### Insight 2: 不需要论文列表的原因

**用户的核心观点**:
- ✅ 研究人员有能力自行查找论文
- ✅ 论文列表容易过时（研究领域不断发展）
- ✅ 不同的研究人员可能使用不同的资源（论文、书籍、工具文档）
- ✅ 重点是定义"研究什么"和"达到什么标准"，而不是"读哪些论文"

**教训**:
- **信任研究人员的专业能力**：不需要手把手提供论文列表
- **聚焦研究目标**：明确"研究方向"和"研究要求"比列出论文更重要
- **避免过度规定**：给研究人员足够的自主权

---

### Insight 3: 研究课题的依赖关系是关键

**观察**:
- 10 个研究课题中，有 **4 个依赖其他课题**（课题 1, 3, 5, 7）
- **课题 2（调用图构建）是关键基础**：课题 1, 3, 7 都依赖它
- 依赖关系影响研究顺序和并行策略

**并行研究策略**:
- **第一批**（独立课题）：课题 2, 4, 6, 9, 10 → 2 周
- **第二批**（依赖第一批）：课题 1, 3, 7 → 3 周
- **第三批**（可选）：课题 5, 8 → 3 周
- **总时间**（并行）：6-8 周 vs 15-23 周（串行）

**教训**:
- **识别依赖关系**是研究规划的核心任务
- **依赖关系影响并行度**：5 个独立课题可以同时开始
- **关键路径分析**：课题 2 是瓶颈，必须优先完成

---

### Insight 4: 研究课题的覆盖完整性

**验证方法**:
1. 从 Task 4 的 30 个缺陷开始
2. 筛选出 Level 2 和 Level 3 的缺陷（16 个）
3. 为每个缺陷分配研究课题
4. 检查是否有缺陷未被覆盖

**覆盖结果**:
- ✅ **16 个缺陷全部覆盖**（无遗漏）
- ✅ **10 个研究课题**（合理整合，避免冗余）

**示例整合**:
- D3 (Interprocedural DFG) + D26 (Context-Sensitive) → 课题 1 (过程间数据流分析)
- D4 (Call Graph Infrastructure) + D19 (Call Graph Precision) → 课题 2 (调用图构建)
- D9 (Alias Analysis) + D25 (Field-Sensitive) → 课题 3 (别名分析)

**教训**:
- **覆盖完整性检查**是质量保证的关键步骤
- **合理整合相关缺陷**可以减少研究课题数量（避免碎片化）
- **可追溯性**很重要：每个缺陷都能追溯到具体的研究课题

---

### Insight 5: 研究课题的优先级评估

**优先级标准**:
- **P0**: 阻塞核心功能（D3, D4）
- **P1**: 影响精度或性能（D8, D9, D10, D6）
- **P2**: 提升精度或可用性（D13, D14, D15, D22）

**优先级分布**:
- P0: 2 个课题（20%）→ 必须优先完成
- P1: 4 个课题（40%）→ 高优先级
- P2: 4 个课题（40%）→ 可延后

**教训**:
- **优先级评估**应基于**业务影响**（阻塞功能 vs 提升精度）
- **P0 课题必须优先完成**：课题 2（调用图）是其他研究的基础
- **P2 课题可以延后**：符号执行（课题 5）复杂且可能昂贵，可以暂缓

---

## Challenges Encountered

### Challenge 1: 理解用户需求的偏差

**问题**:
- 初始理解：Task 9 需要产出详细的研究报告（9.1-9.5）+ 论文列表
- 用户纠正：Task 9 只需要识别研究课题（研究方向 + 目的 + 要求）

**解决方法**:
1. 用户及时指出偏差（"task9的prompt出现了偏差"）
2. 用户明确需求（"不需要给出必读论文，我只需要研究方向，研究目的，研究要求"）
3. 立即修正 prompt 和执行方向

**教训**:
- **AI Agent 容易过度工作**：倾向于提供太详细的内容
- **用户反馈非常重要**：及时纠正可以避免浪费时间
- **明确交付物**：在任务开始时，明确"需要什么"和"不需要什么"

---

### Challenge 2: Prompt 修正的平衡

**问题**:
- 旧 prompt (923 lines) 太详细，包含 54 篇论文引用
- 如何修正为聚焦"研究方向 + 目的 + 要求"，但仍然足够详细？

**解决方法**:
1. **保留核心结构**：问题陈述、缺陷分级、研究课题清单
2. **删除冗余内容**：论文引用、工具源码分析、BibTeX 格式
3. **简化研究要求**：从"必读论文列表"改为"研究方向的问题列表"
4. **明确范围**：Task 9 不包括论文列表、算法分析、工具分析

**结果**:
- 新 prompt (685 lines) vs 旧 prompt (923 lines)
- 减少了 25% 的冗余内容
- 聚焦于研究课题定义，而不是研究材料

**教训**:
- **Less is more**：简洁的 prompt 更容易理解和执行
- **明确边界**：什么是 Task 9 的范围，什么不是
- **用户友好**：研究人员需要的是"研究方向"，而不是"论文列表"

---

### Challenge 3: 研究课题的粒度选择

**问题**:
- 16 个缺陷 → 多少个研究课题？
- 粒度太细（16 个课题）：过于碎片化
- 粒度太粗（5 个课题）：覆盖不全

**解决方法**:
1. **识别相关缺陷**：D3 (Interprocedural DFG) 和 D26 (Context-Sensitive) 可以整合
2. **整合为研究主题**：课题 1 (过程间数据流分析) 同时解决 D3 和 D26
3. **最终粒度**：10 个研究课题（合理平衡）

**教训**:
- **合理整合相关缺陷**可以减少研究课题数量
- **避免过度碎片化**：每个课题应该是一个完整的研究主题
- **可追溯性**：每个缺陷都能追溯到具体的研究课题

---

## Next Steps

### For User

1. **审阅研究课题清单**: 检查 10 个课题是否覆盖全面
2. **决定研究顺序**: 基于优先级和依赖关系，决定先研究哪些课题
3. **启动 Task 10** (可选): 开始研究执行阶段

### For Future Tasks

**Task 10** (Research Execution):
- 执行 Task 9 识别的研究课题
- 每个课题产出：研究报告（算法对比 + 集成方案 + 风险评估）
- 为每个课题创建 semantic notes（sem-006 到 sem-015）

**Task 11** (Defect Remediation):
- 基于 Task 10 的研究结果，开始实施缺陷修复
- 按优先级修复缺陷（P0 → P1 → P2）

---

## Lessons Learned

### Lesson 1: 任务范围的明确性

**问题**: Task 9 的范围不够明确，导致初始理解偏差

**教训**:
- **任务名称很重要**："研究课题识别" vs "研究执行"
- **交付物定义必须明确**："课题清单" vs "研究报告"
- **用户反馈非常重要**：及时纠正可以避免浪费时间

**改进**:
- 在任务开始时，明确"需要什么"和"不需要什么"
- 在 prompt 中明确标注"Task 9 不包括"

---

### Lesson 2: 信任研究人员的专业能力

**观点**: 研究人员有能力自行查找论文和工具文档

**教训**:
- **不需要手把手提供论文列表**：研究人员知道如何查找文献
- **聚焦研究目标**：明确"研究什么"和"达到什么标准"
- **避免过度规定**：给研究人员足够的自主权

**改进**:
- Task 9 只定义"研究方向 + 目的 + 要求"
- 不包括论文列表、工具源码分析

---

### Lesson 3: 依赖关系是研究规划的核心

**观察**: 10 个研究课题中，4 个依赖其他课题

**教训**:
- **识别依赖关系**是研究规划的核心任务
- **依赖关系影响并行度**：5 个独立课题可以同时开始
- **关键路径分析**：课题 2（调用图）是瓶颈

**改进**:
- 为每个课题明确标注依赖关系
- 提供依赖关系图（可视化）
- 提出并行研究策略（5 名工程师，6-8 周）

---

### Lesson 4: 覆盖完整性检查

**方法**: 从缺陷列表开始，确保每个缺陷都有对应的研究课题

**教训**:
- **覆盖完整性检查**是质量保证的关键步骤
- **可追溯性**很重要：缺陷 ↔ 研究课题 ↔ 优先级
- **合理整合**：相关缺陷可以整合到同一研究课题

**结果**:
- ✅ 16 个缺陷全部覆盖（无遗漏）
- ✅ 10 个研究课题（合理整合）

---

### Lesson 5: AI Agent 的过度工作倾向

**观察**: AI Agent 倾向于提供太详细的内容（如 54 篇论文引用）

**教训**:
- **AI Agent 容易过度工作**：认为"越详细越好"
- **用户反馈非常重要**：及时纠正可以避免浪费时间
- **Less is more**：简洁的交付物更容易理解和使用

**改进**:
- 在 prompt 中明确标注"不需要什么"
- 用户在任务开始时，明确交付物的范围和形式

---

## Links

- **Prompt modified**: `/claude/prompt/9.research-intensive-analysis.md` (685 lines)
- **Deliverable created**: `/claude/result/9/研究课题清单.md` (450 lines)
- **Related prompts**:
  - `4.gap-analysis-and-fork-roadmap.md` (Task 4: 缺陷识别)
  - `5.resource-analysis-and-staffing.md` (Task 5: 资源分析)
- **Related episodic notes**:
  - `ep-016` (Task 9 Prompt Creation - 初始版本，有偏差)
  - `ep-005` (Task 4 Prompt Creation)
  - `ep-007` (Task 4 Execution)

---

**Session Duration**: ~30 分钟
**Context Used**: ~20K tokens（修正 + 执行）
**Output**: 1 Modified Prompt (685 lines) + 1 Deliverable (450 lines) + 1 Episodic Note (本文档)

---

## Appendix: Task 9 交付物结构

### 研究课题清单.md (450 lines)

**主要章节**:
1. **文档概述** (50 lines)
   - 文档目的、范围、说明
2. **研究课题概览** (50 lines)
   - 缺陷分级与研究需求
3. **10 个核心研究课题** (300 lines)
   - 每个课题：研究方向、研究目的、研究要求、优先级、依赖关系
4. **研究课题汇总表** (30 lines)
5. **依赖关系图** (20 lines)
6. **并行研究策略** (30 lines)
7. **后续步骤** (20 lines)
8. **风险与注意事项** (20 lines)
9. **与其他任务的关系** (10 lines)

**质量指标**:
- ✅ 覆盖完整性：16 个缺陷全部覆盖
- ✅ 清晰性：每个课题都有明确的研究方向、目的、要求
- ✅ 可操作性：工程师可以根据课题定义，开始独立研究
- ✅ 简洁性：450 lines（vs 旧版 9.1-9.8 预计 3000+ lines）
