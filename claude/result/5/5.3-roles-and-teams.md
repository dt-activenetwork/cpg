# CPG 缺陷修复人力资源分析报告

## 第二部分: 角色定义和团队结构

**文档**: 5.3-roles-and-teams.md
**范围**: 6 个核心角色定义, 3 种团队规模选项, 4 种协作模式, 缺陷到角色分配矩阵
**目标**: 提供可执行的团队组建方案

---

## 2.1 角色目录

基于 Part 1 的技能分析,定义 **6 个核心角色**:

---

### 角色 1: Integration Engineer (Team Lead)

**职位名称**: Senior/Staff Integration Engineer (CPG Integration Lead)
**级别**: Expert (L6-L7 equivalent, 10+ years experience)
**雇佣类型**: Full-time, contract-to-hire (6-12 months initial)

#### 职责

1. **架构决策**: 决定跨 Frontend-Core 的集成策略 (如 D1 在哪里创建 DFG 边)
2. **团队领导**: 领导 4-6 人团队,协调各角色工作,确保交付
3. **集成缺陷修复**: 主导修复 D1 (Static Final DFG), D7 (Type System) 等集成缺陷
4. **代码 Review**: Review 所有缺陷修复,确保质量和一致性
5. **技术沟通**: 作为技术负责人,与项目管理者、其他团队沟通

#### 必备技能

- 10+ years 软件工程经验
- 3+ years 静态分析框架经验 (CPG, Soot, WALA, 或类似工具)
- 深度理解编译器内部结构 (AST, CFG, DFG, SSA)
- 同时理解 Frontend + Core 架构 (能够跨边界设计)
- Kotlin 或 Scala 编程能力 (CPG 用 Kotlin 实现)
- 强架构设计能力 (能够权衡精度 vs 性能 vs 复杂度)
- 团队领导经验 (带过 5-10 人团队)

#### 加分技能

- CPG 上游贡献经验 (提交过 PR 到 Fraunhofer-AISEC/cpg)
- 多语言抽象设计经验 (理解如何设计 language-agnostic 架构)
- 发表过静态分析相关论文或演讲

#### 负责缺陷

- **Primary**: D1 (Static Final DFG), D7 (Type System) - 共 2 个
- **Review**: 所有 18 个缺陷 (作为 team lead,review 所有修复)

#### 成功指标

- 18 个 P0-P1 缺陷在 24-28 weeks 内修复完成
- Task 3 场景 100% 通过
- 误报率 < 5% (从当前 80% 降低到 5%)
- 团队成员成长 (至少 1 名成员达到 self-sufficient level)

---

### 角色 2: Java Frontend Specialist

**职位名称**: Senior Java/CPG Frontend Engineer
**级别**: Senior (L5 equivalent, 5+ years experience)
**雇佣类型**: Full-time (6-12 months)

#### 职责

1. **Java 特定缺陷修复**: 修复 D2 (String.equals), D5 (Integer), D6 (Enum) 等 Java 语言缺陷
2. **Handler 扩展**: 扩展 FieldDeclarationHandler, MethodDeclarationHandler 等
3. **Java 语义保证**: 确保所有修复符合 Java 语言规范 (JLS)
4. **类型信息提供**: 为 D4 (Call Graph), D7 (Type System) 提供类型信息

#### 必备技能

- 5+ years Java 开发经验
- 深度理解 Java 语言规范 (JLS): static final, enum, lambda, generics, annotations
- 理解 CPG Handler pattern 和 Frontend 架构
- Kotlin 编程能力
- AST 转换经验 (如何从 Java AST 转换为 CPG 节点)

#### 加分技能

- 编译器开发经验 (开发过 Java 编译器插件或 annotation processor)
- 熟悉 JavaParser, Eclipse JDT, 或类似工具

#### 负责缺陷

- **Primary**: D2, D5, D6, D15, D16, M1, M2, M3 - 共 8 个 (但 M1-M3 是 P2,可选)
- **Support**: D1 (实现 Handler 部分), D7 (提供类型信息)

---

### 角色 3: CPG Core Specialist

**职位名称**: Senior CPG Core Engineer (Graph Algorithms)
**级别**: Senior (L5 equivalent, 5+ years experience)
**雇佣类型**: Full-time (6-12 months)

#### 职责

1. **Core Pass 开发**: 创建 InterproceduralDFGPass (D3), CallGraphPass (D4) 等
2. **图算法实现**: 实现 Call Graph construction, interprocedural DFG, alias analysis 等算法
3. **性能优化**: 确保 Pass 执行速度可接受 (与 Performance Engineer 协作)

#### 必备技能

- 5+ years 软件工程经验
- 深度理解图算法 (DFG, Call Graph, alias analysis, SSA)
- 理解 CPG Core Pass infrastructure
- 编译器理论背景 (学过编译原理,理解数据流分析算法)
- Kotlin 编程能力

#### 加分技能

- 静态分析工具经验 (Soot, WALA, SpotBugs)
- 研究论文阅读能力 (PLDI, POPL, OOPSLA 论文)
- 算法竞赛经验 (如 ACM-ICPC)

#### 负责缺陷

- **Primary**: D3, D4, D8, D9, D13, D14, D19, D25, D26 - 共 9 个 (但 D8-D9, D13-D14, D19, D25-D26 是 P2-P3,可选)
- **Support**: D1 (review DFG Pass 部分)

---

### 角色 4: Performance & Scalability Engineer

**职位名称**: Senior Performance Engineer (Static Analysis)
**级别**: Senior (L5 equivalent, 5+ years experience)
**雇佣类型**: Part-time 50% or Full-time (depending on budget)

#### 职责

1. **并行化**: 实现 D10 (Parallel Analysis)
2. **字节码分析**: 实现 D12 (Bytecode Analysis)
3. **性能优化**: 优化 D3, D4 的性能 (caching, incremental)
4. **增量分析**: 实现 D22 (Incremental Analysis) [P2, optional]

#### 必备技能

- 5+ years 性能工程经验
- 并行算法设计 (task parallelism, data parallelism, race condition 处理)
- JVM 字节码理解 (指令集, ASM 库)
- 性能调优经验 (profiling, caching, 算法优化)

#### 加分技能

- JVM 内部结构理解 (JIT, GC, class loading)
- ASM 库熟练使用
- 并发编程经验 (Java concurrency, lock-free algorithms)

#### 负责缺陷

- **Primary**: D10, D12, D22 - 共 3 个 (D22 是 P2,可选)
- **Support**: D3, D4 (performance optimization), D12 (bytecode part with Tooling Engineer)

---

### 角色 5: Testing & Validation Specialist

**职位名称**: Mid-to-Senior Test Engineer (Static Analysis)
**级别**: Mid-to-Senior (L4-L5 equivalent, 3-5 years experience)
**雇佣类型**: Full-time (throughout the project)

#### 职责

1. **测试框架开发**: 创建 D17 (Testing Infrastructure)
2. **Scenario 测试**: 将 Task 3 的 4 个场景转化为自动化测试
3. **Regression 测试**: 确保所有修复不破坏现有功能
4. **所有缺陷验证**: 为所有 18 个缺陷设计测试用例并验证

#### 必备技能

- 3-5 years 测试工程经验
- 测试框架设计 (JUnit, Spock, TestNG)
- Scenario-based 测试设计
- Regression 测试策略

#### 加分技能

- 静态分析工具测试经验
- Property-based testing 经验 (如 QuickCheck)

#### 负责缺陷

- **Primary**: D17 (Testing Infrastructure) - 1 个
- **Support**: 所有 18 个缺陷 (设计测试用例,验证修复)

---

### 角色 6: Tooling & Ecosystem Engineer

**职位名称**: Mid-level Tooling Engineer
**级别**: Mid-level (L4 equivalent, 3-5 years experience)
**雇佣类型**: Part-time 50% or Full-time (depending on budget)

#### 职责

1. **构建系统集成**: 实现 D23 (Maven/Gradle Integration)
2. **错误恢复**: 实现 D11 (Error Recovery)
3. **部分分析**: 实现 D24 (Partial Analysis)
4. **字节码协助**: 协助 Performance Engineer 实现 D12 的字节码部分

#### 必备技能

- 3-5 years 工具开发经验
- Maven/Gradle 插件开发
- 构建系统集成 (classpath resolution, dependency management)
- 容错解析 (resilient parsing, error recovery)

#### 加分技能

- Java 构建工具深度理解 (Maven, Gradle, Ant)
- CI/CD 集成经验

#### 负责缺陷

- **Primary**: D11, D23, D24 - 共 3 个
- **Support**: D12 (bytecode part)

---

## 2.2 团队组成选项

### 方案 1: 最小可行团队

**团队规模**: 3 FTE (Full-Time Equivalent)
**工期**: 12-16 weeks
**预算**: ~200-350 person-hours (约 1-2 person-months per role)

**团队构成**:
- 1x Integration Engineer (Expert, Team Lead) - Full-time
- 1x Java Frontend Specialist (Senior) - Full-time
- 1x Testing Specialist (Mid-to-Senior) - Full-time

**覆盖范围**: P0 缺陷 only (D1-D2)
**交付成果**: Task 3 Scenario 1, 4 工作 (50% 场景)

**优势**:
- 最低成本
- 快速验证可行性 (3-6 小时可看到 D1+D2 效果)
- 低风险 (投入小)

**劣势**:
- 只覆盖 50% 场景,不满足生产需求
- 无过程间分析 (D3-D4 未修复)
- 无真实部署能力 (D10-D12 未修复)

**适用场景**: Proof of Concept, 预算极度受限场景

---

### 方案 2: 推荐团队 ⭐

**团队规模**: 4.5 FTE
**工期**: 20-28 weeks
**预算**: ~1250-2100 person-hours (约 7-13 person-months total)

**团队构成**:
- 1x Integration Engineer (Expert, Team Lead) - Full-time
- 1x Java Frontend Specialist (Senior) - Full-time
- 1x CPG Core Specialist (Senior) - Full-time
- 1x Performance Engineer (Senior) - Part-time 50%
- 1x Testing Specialist (Mid-to-Senior) - Full-time
- (Tooling Engineer part-time 可选,或外包)

**覆盖范围**: P0-P1 缺陷 (D1-D5, D7, D10, D12, D17) - 9 个
**交付成果**: Task 3 场景 100% 解锁,真实项目可部署

**优势**:
- 覆盖所有关键缺陷 (P0-P1)
- 达到生产级质量 (性能, 字节码, 测试)
- 平衡成本和质量

**劣势**:
- 成本较高 (相比 Option 1)
- 时间较长 (5-7 months)

**适用场景**: 大多数场景,追求生产级质量

---

### 方案 3: 最优团队

**团队规模**: 7 FTE
**工期**: 32-40 weeks
**预算**: ~2400-4000 person-hours (约 15-25 person-months total)

**团队构成**:
- 1x Integration Engineer (Expert, Team Lead) - Full-time
- 2x Java Frontend Specialists (1 Senior + 1 Mid) - Full-time
- 2x CPG Core Specialists (1 Senior + 1 Mid) - Full-time
- 1x Performance Engineer (Senior) - Full-time
- 1x Testing Specialist (Senior) - Full-time
- 1x Tooling Engineer (Mid-level) - Full-time

**覆盖范围**: P0-P2 缺陷 (18 个) - 全覆盖
**交付成果**: 高精度 (85-90%), 高性能, 完整功能

**优势**:
- 完整覆盖所有缺陷
- 并行工作流 (Frontend 和 Core 并行)
- 高质量 (所有 P2 增强都修复)

**劣势**:
- 成本最高
- 时间最长 (8-10 months)

**适用场景**: 对质量和功能有极高要求的场景

---

## 2.3 团队协作模式

### 模式 1: 集成驱动协作

**适用于**: D1, D7 (跨 Frontend-Core 边界的缺陷)

**工作方式**:
1. Integration Engineer 主导设计 (决定接口和集成策略)
2. Frontend Specialist 实现 Frontend 部分 (如 Handler 修改)
3. Core Specialist 实现 Core 部分 (如 Pass 修改,D1 的情况)
4. Integration Engineer 集成两部分,解决集成问题

**沟通机制**:
- Daily sync (15 分钟, stand-up)
- Weekly architecture review (1 小时,review 设计决策)

**示例 (D1)**:
- Week 1: Integration Engineer 设计 static final DFG 边创建策略 (在 Handler vs Pass)
- Week 2-3: Frontend Specialist 实现 Handler 修改, Core Specialist review
- Week 3-4: Integration testing, 修复集成问题

---

### 模式 2: 专家驱动协作

**适用于**: D3, D4, D10, D12 (单一领域缺陷)

**工作方式**:
1. Specialist (Core/Performance) 主导设计和实现
2. Integration Engineer review 设计和代码
3. Testing Specialist 设计测试用例并验证

**沟通机制**:
- Bi-weekly progress update (30 分钟)
- Ad-hoc sync as needed (when blocked)

**示例 (D4 - Call Graph)**:
- Week 1-2: Core Specialist 设计 Call Graph 算法 (CHA)
- Week 3-6: Core Specialist 实现 CallGraphPass
- Week 7: Integration Engineer review API 设计
- Week 8: Testing Specialist 验证 Call Graph 完整性

---

### 模式 3: 顺序依赖协作

**适用于**: D3 depends on D4, D10 depends on D8

**工作方式**:
1. 上游缺陷完成 (如 D4 Call Graph)
2. Handoff meeting (2 小时,上游开发者讲解 API 和设计)
3. 下游缺陷启动 (如 D3 Interprocedural DFG)

**沟通机制**:
- Handoff meeting (2 小时,文档 + 演示)
- Weekly sync (30 分钟,下游遇到问题时询问上游)

**示例 (D4 → D3)**:
- Week 8: D4 完成,Core Specialist A (D4 owner) 准备 handoff 文档
- Week 9: Handoff meeting,Core Specialist A 向 Core Specialist B (D3 owner) 讲解 Call Graph API
- Week 9-16: Core Specialist B 实现 D3,遇到问题时与 A 同步

---

### 模式 4: 并行工作流

**适用于**: 多个独立缺陷可以并行修复

**工作流**:
- **Stream 1 (Frontend)**: D2, D5, D6, D15, D16 → Frontend Specialist 并行工作
- **Stream 2 (Core)**: D4 → D3 (sequential, Core Specialist)
- **Stream 3 (Performance)**: D10, D12 → Performance Engineer 并行工作 (D10 可与 D4 并行)
- **Stream 4 (Testing)**: D17 → Testing Specialist (全程支持所有流)

**同步机制**:
- Weekly full-team sync (1 小时,所有人参加,同步进度)

**好处**:
- 节省时间 (D10 与 D4 并行,节省 2-4 weeks)
- 提高效率 (各 Specialist 专注自己领域)

---

## 2.4 缺陷到角色分配矩阵

| 缺陷 ID | 名称 | 主导角色 | 支持角色 | 协作模式 |
|-----------|------|-------------|------------------|----------------------|
| **D1** | Static Final DFG | Integration Engineer | Frontend Specialist (impl), Core Specialist (review) | Integration-Led |
| **D2** | String.equals | Core Specialist | Frontend Specialist (review), Testing Specialist (test) | Specialist-Led |
| **D3** | Interprocedural DFG | Core Specialist | Integration Engineer (coordination), Performance Engineer (perf) | Sequential (after D4) |
| **D4** | Call Graph | Core Specialist | Integration Engineer (API design), Frontend Specialist (type info) | Specialist-Led |
| **D5** | Integer Evaluation | Core Specialist | Frontend Specialist (review) | Specialist-Led |
| **D7** | Type System | Integration Engineer | Frontend Specialist (impl), Core Specialist (integration with D4) | Integration-Led |
| **D10** | Parallel Analysis | Performance Engineer | Core Specialist (Pass infrastructure) | Specialist-Led |
| **D12** | Bytecode Analysis | Performance Engineer | Integration Engineer (unified representation), Tooling Engineer (JAR) | Specialist-Led |
| **D17** | Testing Infrastructure | Testing Specialist | All roles (provide test requirements) | Specialist-Led |
| **D6** | Enum Constants | Frontend Specialist | - | Specialist-Led |
| **D8** | Flow-Sensitive DFG | Core Specialist | Integration Engineer (coordination with D3) | Specialist-Led |
| **D11** | Error Recovery | Tooling Engineer | Frontend Specialist (Parser integration) | Specialist-Led |
| **D15** | Lambda Coverage | Frontend Specialist | - | Specialist-Led |
| **D16** | Try-with-Resources | Frontend Specialist | - | Specialist-Led |
| **D22** | Incremental Analysis | Performance Engineer | Core Specialist (Pass infrastructure) | Specialist-Led |
| **D23** | Maven/Gradle | Tooling Engineer | - | Specialist-Led |
| **D24** | Partial Analysis | Tooling Engineer | Core Specialist (graph handling) | Specialist-Led |
| **M1** | Generics | Frontend Specialist | Integration Engineer (type representation) | Specialist-Led |

---

## 2.5 第二部分总结

### 关键决策

**1. 推荐团队规模: 4.5 FTE**
- 理由: 覆盖所有 P0-P1,达到生产级质量,成本可控
- 成本: ~1250-2100 person-hours (约 7-13 person-months)
- 时间线: 20-28 weeks (5-7 months)

**2. 关键角色: Integration Engineer (Team Lead)**
- 必需: Expert 级别 (10+ years),同时理解 Frontend + Core
- 稀缺: 这类人才不常见,可能需要外部招聘或顾问

**3. 并行化是关键**:
- D10 (Parallel) 可与 D4 (Call Graph) 并行 → 节省 2-4 weeks
- Frontend 修复 (D2, D5, D6) 可与 Core 修复 (D4→D3) 并行 → 节省 2-4 weeks
- **Total savings**: 4-8 weeks (从 28 weeks 降低到 20-24 weeks)

**4. 测试贯穿全程**:
- Testing Specialist 应从 Day 1 就加入
- 边修复边测试 (continuous validation)
- 最后统一 regression 测试

---

### 下一步

继续阅读:
- **[5.4-appendices.md](./5.4-appendices.md)**: 技能到缺陷矩阵, 角色对比表, 术语表

---

**第二部分完成**: 6 roles, 3 team options, 4 collaboration patterns, defect-to-role matrix 全部定义完毕。

---
