# CPG 缺陷修复研究课题清单

**文档版本**: 1.0.0
**创建日期**: 2025-11-13
**任务编号**: Task 9
**文档类型**: 研究课题识别

---

## 文档概述

本文档基于 Task 4（CPG 缺陷分析）的成果，识别了修复 CPG 缺陷所需的 **10 个核心研究课题**。这些课题覆盖了所有需要深入学术研究的领域（Level 2 和 Level 3 缺陷）。

**文档目的**:
- 为研究团队提供明确的研究方向
- 定义每个研究课题的目的和要求
- 建立研究课题之间的依赖关系
- 指导后续的研究执行阶段

**重要说明**:
- ✅ 本文档**只识别研究课题**，不包含具体论文列表或算法细节
- ✅ 研究人员需要自行查找相关文献、论文、工具文档
- ✅ 每个课题的研究深度和具体方法由研究人员自主决定

---

## 研究课题概览

### 缺陷分级与研究需求

根据修复缺陷所需的研究深度，Task 4 的 30 个缺陷被分为 4 级：

| 级别 | 定义 | 缺陷数量 | 研究需求 |
|------|------|---------|---------|
| **Level 1** | 常规工程实践 | ~10 个 | ❌ 无需研究（参考现有实现） |
| **Level 2** | 中等研究需求 | ~8 个 | ✅ 需要研究算法理论 |
| **Level 3** | 深度研究需求 | ~8 个 | ✅ 需要深入研究理论与演进 |
| **Level 4** | 前沿研究 | ~4 个 | ⏸️ 可选（长期研究） |

**Task 9 的范围**: Level 2 + Level 3 = **16 个缺陷** → **10 个研究课题**

---

## 10 个核心研究课题

### 课题 1: 过程间数据流分析

**研究方向**:
- 如何跨函数边界追踪数据流？
- 过程间数据流分析的理论基础是什么？
- 有哪些经典算法和框架？（如 IFDS, Summary-based, Dataflow）

**研究目的**:
- **解决缺陷**: D3 (Interprocedural DFG Missing), D26 (Context-Sensitive Analysis)
- **核心问题**: 当前 CPG 只能在单个函数内追踪数据流，无法处理跨函数的数据传播
- **业务影响**: 阻塞 Task 3 的场景 2（跨函数污点追踪）和场景 3（跨模块常量传播）

**研究要求**:
1. 理解过程间数据流分析的理论模型（流方程、数据流事实）
2. 对比不同算法的精度和性能（IFDS, Summary-based, Datalog-based）
3. 理解上下文敏感性的不同策略（Call-string, Object-sensitive, Type-sensitive）
4. 基于精度、性能、实现复杂度，推荐适合 CPG 的算法
5. 设计如何在 CPG 的 DFG 基础上集成过程间分析

**优先级**: **P0** (最高)
**依赖关系**: 依赖课题 2 (调用图构建)
**预计研究时间**: 2-3 周

---

### 课题 2: 调用图构建

**研究方向**:
- 如何构建程序的调用图？
- 有哪些调用图构建算法？（从快速到精确）
- 如何处理 Java 的虚函数调用、反射、Lambda？

**研究目的**:
- **解决缺陷**: D4 (Call Graph Infrastructure Missing), D19 (Call Graph Precision)
- **核心问题**: 调用图是所有过程间分析的基础设施，缺失则无法进行过程间分析
- **业务影响**: 阻塞所有过程间分析（D3, D9, D26）

**研究要求**:
1. 对比不同调用图算法（CHA, RTA, VTA, k-CFA）
2. 评估不同算法在大型代码库上的精度-性能权衡
3. 研究如何处理 Java 特性（虚函数、反射、动态代理、Lambda）
4. 提出分阶段实施方案（Phase 1: CHA, Phase 2: RTA, Phase 3: k-CFA/object-sensitive）

**优先级**: **P0** (最高，是其他研究的基础)
**依赖关系**: 无（独立课题，可最先开始）
**预计研究时间**: 1-2 周

---

### 课题 3: 别名分析/指针分析

**研究方向**:
- 什么是别名分析？什么是指针分析？
- 如何确定两个变量是否指向同一对象？
- Java 的指针分析与 C/C++ 有何不同？

**研究目的**:
- **解决缺陷**: D9 (No Alias Analysis), D25 (Field-Sensitive DFG)
- **核心问题**: 别名分析是精确数据流分析的基础，缺失会导致大量假阳性
- **业务影响**: 影响所有数据流分析的精度（常量传播、污点分析、空指针检测）

**研究要求**:
1. 理解别名分析的核心概念（Must-alias vs May-alias, Flow-sensitive vs Flow-insensitive）
2. 对比经典指针分析算法（Andersen's, Steensgaard's）
3. 研究字段敏感分析（如何区分同一对象的不同字段？如何处理数组？）
4. 研究指针分析和调用图的相互依赖（鸡蛋问题，如何迭代求精？）
5. 研究 Java 的特殊性（String immutability, Wrapper types, 数组和集合）

**优先级**: **P1** (高优先级)
**依赖关系**: 依赖课题 2 (调用图构建)
**预计研究时间**: 2-3 周

---

### 课题 4: 静态单赋值形式 (SSA)

**研究方向**:
- 什么是 SSA 形式？
- 如何将普通代码转换为 SSA 形式？
- SSA 如何支持流敏感的数据流分析？

**研究目的**:
- **解决缺陷**: D8 (Flow-Insensitive DFG → Flow-Sensitive DFG)
- **核心问题**: 当前 DFG 是流不敏感的，不区分变量的不同赋值，导致精度损失
- **业务影响**: 影响常量传播、活跃变量分析、死代码消除的精度

**研究要求**:
1. 理解 SSA 的核心概念（每个变量只赋值一次、Phi nodes、Dominance frontier）
2. 研究 SSA 构建算法（Cytron's algorithm, Minimal SSA）
3. 研究如何在 CPG 中实现 SSA（EOG → CFG → Dominance → SSA）
4. 评估 SSA 构建的时间和空间开销

**优先级**: **P1** (高优先级)
**依赖关系**: 无（独立课题）
**预计研究时间**: 1 周

---

### 课题 5: 路径敏感分析与符号执行

**研究方向**:
- 什么是路径敏感分析？
- 什么是符号执行？
- 如何在静态分析中建模路径条件？

**研究目的**:
- **解决缺陷**: D13 (Path Condition Missing)
- **核心问题**: 当前分析无法区分不同执行路径的条件，无法排除不可达路径
- **业务影响**: 影响可达性分析、常量传播、死代码检测的精度

**研究要求**:
1. 理解路径敏感分析的核心概念（Path condition, Symbolic state, Constraint solving）
2. 研究符号执行的基本原理（符号化变量、路径探索、Path explosion 问题）
3. **可行性评估**: 完整符号执行可能过于昂贵，是否使用简化方案？
4. 研究如何集成 SMT Solver（Z3, CVC4, Yices）

**优先级**: **P2** (中等优先级，复杂且可能昂贵)
**依赖关系**: 依赖课题 4 (SSA)
**预计研究时间**: 2-3 周
**特殊说明**: 需要特别评估可行性，可能结论是"暂不实施"或"使用简化方案"

---

### 课题 6: 异常流分析

**研究方向**:
- 如何在控制流图中建模异常？
- 如何追踪异常的传播路径？
- 如何处理 try-catch-finally？

**研究目的**:
- **解决缺陷**: D14 (Exception Flow Incomplete)
- **核心问题**: 当前 EOG 对异常的建模不完整，异常路径的数据流丢失
- **业务影响**: 影响异常安全分析、资源泄漏检测

**研究要求**:
1. 理解异常控制流（ECFG, Exception propagation, Implicit exceptions）
2. 研究如何在 CPG 中建模异常（显式异常边、隐式异常边、Finally block）
3. 设计异常边的集成方案

**优先级**: **P2** (中等优先级)
**依赖关系**: 无（基于现有 EOG）
**预计研究时间**: 1 周

---

### 课题 7: Lambda 和动态特性处理

**研究方向**:
- Java Lambda 的底层实现机制（invokedynamic）
- 如何在静态分析中处理 Lambda？
- 如何处理反射和动态代理？

**研究目的**:
- **解决缺陷**: D15 (Java Feature Coverage Gaps - Lambda)
- **核心问题**: Lambda 表达式在 CPG 中建模不完整，导致数据流断裂
- **业务影响**: 影响使用 Lambda 的代码分析精度（如 Stream API）

**研究要求**:
1. 研究 Lambda 的编译器转换（Lambda → 匿名类、invokedynamic、LambdaMetafactory）
2. 研究如何在 CPG 中表示 Lambda（作为匿名类？还是特殊的函数对象？）
3. 研究反射的静态分析方法（String-based analysis, 动态信息收集）

**优先级**: **P2** (中等优先级)
**依赖关系**: 依赖课题 2 (调用图构建)
**预计研究时间**: 1-2 周

---

### 课题 8: 增量分析

**研究方向**:
- 什么是增量分析？
- 如何在代码变更后只重新分析受影响的部分？
- 如何识别变更的影响范围？

**研究目的**:
- **解决缺陷**: D22 (Incremental Analysis Missing)
- **核心问题**: 全量重新分析大型代码库非常耗时
- **业务影响**: 影响 IDE 集成、持续集成的用户体验

**研究要求**:
1. 理解增量分析的核心概念（Change impact analysis, Demand-driven, Invalidation）
2. 研究增量分析的算法（如何识别影响范围？如何缓存中间结果？）
3. 设计增量分析的架构（如何缓存 CPG 的中间结果？如何标记失效节点？）

**优先级**: **P2** (中等优先级，性能优化)
**依赖关系**: 无（但需要先有完整的分析流程）
**预计研究时间**: 1-2 周

---

### 课题 9: 并行分析

**研究方向**:
- 如何并行化静态分析？
- 图分析算法如何并行化？
- 如何处理并发的数据竞争？

**研究目的**:
- **解决缺陷**: D10 (Parallel Analysis Missing)
- **核心问题**: 大型代码库的分析非常耗时，并行化可以显著缩短分析时间
- **业务影响**: 影响分析性能和可扩展性

**研究要求**:
1. 理解并行图算法（Lock-free data structures, Work-stealing, Graph partitioning）
2. 研究不同的并行化策略（按文件/函数/节点并行）
3. 研究如何保证并行分析的正确性（数据竞争检测、原子操作）
4. 评估并行化的加速比和可扩展性

**优先级**: **P1** (高优先级，性能关键)
**依赖关系**: 无（但需要先有串行的正确实现）
**预计研究时间**: 1-2 周

---

### 课题 10: Enum 的编译器 Desugaring

**研究方向**:
- Java Enum 的底层实现机制
- 编译器如何将 Enum 转换为类和方法？
- Enum 的 switch-case 如何处理？

**研究目的**:
- **解决缺陷**: D6 (Enum Constants Not Resolved)
- **核心问题**: 当前 CPG 无法正确解析 Enum 常量，导致 Enum 相关的常量传播失败
- **业务影响**: 影响使用 Enum 的代码的分析精度

**研究要求**:
1. 研究 Enum 的编译器转换（Enum → java.lang.Enum 子类、values()/valueOf() 生成）
2. 研究 Enum switch 的编译（TableSwitch vs LookupSwitch）
3. 设计 Enum 在 CPG 中的表示

**优先级**: **P1** (高优先级，Java 常见特性)
**依赖关系**: 无（独立课题）
**预计研究时间**: 1 周

---

## 研究课题汇总表

| 课题 ID | 研究课题 | 关联缺陷 | 优先级 | 依赖关系 | 预计时间 |
|--------|---------|---------|--------|---------|---------|
| **课题 1** | 过程间数据流分析 | D3, D26 | **P0** | 依赖课题 2 | 2-3 周 |
| **课题 2** | 调用图构建 | D4, D19 | **P0** | 无 | 1-2 周 |
| **课题 3** | 别名分析/指针分析 | D9, D25 | P1 | 依赖课题 2 | 2-3 周 |
| **课题 4** | 静态单赋值形式 (SSA) | D8 | P1 | 无 | 1 周 |
| **课题 5** | 路径敏感与符号执行 | D13 | P2 | 依赖课题 4 | 2-3 周 |
| **课题 6** | 异常流分析 | D14 | P2 | 无 | 1 周 |
| **课题 7** | Lambda 和动态特性 | D15 | P2 | 依赖课题 2 | 1-2 周 |
| **课题 8** | 增量分析 | D22 | P2 | 无 | 1-2 周 |
| **课题 9** | 并行分析 | D10 | P1 | 无 | 1-2 周 |
| **课题 10** | Enum Desugaring | D6 | P1 | 无 | 1 周 |

**统计**:
- **P0 (最高优先级)**: 2 个课题
- **P1 (高优先级)**: 4 个课题
- **P2 (中等优先级)**: 4 个课题
- **总计**: 10 个研究课题

**预计总研究时间**:
- **串行执行**: 15-23 周
- **并行执行**（5 名工程师）: **6-8 周**

---

## 研究课题依赖关系图

```
┌─────────────────────────────────────────────────┐
│ 第一批：独立课题（可并行开始）                     │
├─────────────────────────────────────────────────┤
│ 课题 2: 调用图构建 (P0) [1-2周]                 │
│ 课题 4: SSA (P1) [1周]                          │
│ 课题 6: 异常流分析 (P2) [1周]                    │
│ 课题 9: 并行分析 (P1) [1-2周]                   │
│ 课题 10: Enum Desugaring (P1) [1周]             │
└──────────┬──────────────────────────────────────┘
           │
           │ 完成第一批后
           ▼
┌─────────────────────────────────────────────────┐
│ 第二批：依赖调用图的课题                          │
├─────────────────────────────────────────────────┤
│ 课题 1: 过程间数据流分析 (P0) [2-3周]           │
│ 课题 3: 别名分析 (P1) [2-3周]                   │
│ 课题 7: Lambda 处理 (P2) [1-2周]                │
└──────────┬──────────────────────────────────────┘
           │
           │ 可选
           ▼
┌─────────────────────────────────────────────────┐
│ 第三批：高级/可选课题                            │
├─────────────────────────────────────────────────┤
│ 课题 5: 路径敏感与符号执行 (P2) [2-3周]         │
│ 课题 8: 增量分析 (P2) [1-2周]                   │
└─────────────────────────────────────────────────┘
```

**关键路径**:
1. 课题 2 (调用图) → 课题 1 (过程间 DFA) → 实施 D3
2. 课题 2 (调用图) → 课题 3 (别名分析) → 实施 D9

---

## 并行研究策略

### 5 名工程师的并行方案

**假设**: 5 名工程师并行研究（与 Task 5 的推荐团队一致）

| 时间段 | 工程师 1 | 工程师 2 | 工程师 3 | 工程师 4 | 工程师 5 |
|--------|---------|---------|---------|---------|---------|
| **Week 1-2** | 课题 2<br/>(调用图) | 课题 4<br/>(SSA) | 课题 6<br/>(异常流) | 课题 9<br/>(并行) | 课题 10<br/>(Enum) |
| **Week 3-5** | 课题 1<br/>(过程间 DFA) | 课题 3<br/>(别名分析) | 课题 7<br/>(Lambda) | 课题 8<br/>(增量) | 课题 5<br/>(符号执行) |

**总时间**: **6-8 周**（vs 15-23 周串行）
**加速比**: **~3x**

---

## 后续步骤

### For 研究团队

1. **审阅本清单**: 确认 10 个研究课题是否覆盖全面
2. **分配课题**: 根据依赖关系和优先级，分配研究人员
3. **开始研究**: 每个课题独立执行（查找论文、理解算法、工具分析）
4. **产出报告**: 每个课题产出研究报告（算法对比 + 集成方案 + 风险评估）

### For Task 10（研究执行）

**每个研究课题的执行流程**:
1. **文献调研**: 查找相关论文、书籍、博客、工具文档
2. **算法理解**: 理解核心算法的原理、数据结构、复杂度
3. **工具分析**: 分析 Soot, WALA, Doop 等工具的实现
4. **算法选型**: 基于精度、性能、实现复杂度，选择适合 CPG 的算法
5. **集成设计**: 设计如何将算法集成到 CPG 的架构中
6. **产出报告**: 撰写研究报告（算法对比 + 集成方案 + 风险评估）

### For Task 11（缺陷修复）

基于 Task 10 的研究结果，开始实施缺陷修复。

---

## 风险与注意事项

### 风险 1: 研究深度难以估计
- **描述**: 某些课题的研究深度可能超出预期
- **缓解**: 设定时间上限，超时则降级或延期

### 风险 2: 算法实施难度超出预期
- **描述**: 即使理解算法，实施时可能遇到工程挑战
- **缓解**: POC 验证 → 评估可行性 → 决定是否继续

### 风险 3: 依赖课题未完成
- **描述**: 某些课题依赖其他课题的研究结果
- **缓解**: 严格按依赖顺序执行（课题 2 → 课题 1, 3, 7）

---

## 与其他任务的关系

- **Task 4 (Gap Analysis)**: 识别了 30 个缺陷，Task 9 基于此识别研究课题
- **Task 5 (Resource Analysis)**: 提供了团队结构，Task 9 的并行策略基于此
- **Task 10 (Research Execution)** (未来): 执行 Task 9 识别的研究课题
- **Task 11 (Defect Remediation)** (未来): 基于 Task 10 的研究结果，修复缺陷

---

## 文档版本历史

| 版本 | 日期 | 变更内容 |
|------|------|---------|
| 1.0.0 | 2025-11-13 | 初始版本，识别 10 个研究课题 |

---

**文档状态**: ✅ 已完成
**下一步**: 启动 Task 10（研究执行）
