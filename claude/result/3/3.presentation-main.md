---
marp: true
theme: default
paginate: true
header: 'CPG ç²¾ç¡®å¯è¾¾æ€§åˆ†æï¼šä»æºç åˆ°ç²¾ç¡®å‰ªæ'
footer: 'Task 3: å®Œæ•´æµç¨‹æ¼”ç¤º | Based on Task 2 Analysis'
---

<!-- _class: lead -->

# CPG ç²¾ç¡®å¯è¾¾æ€§åˆ†æ
## è¶…è¶Šä¼ ç»Ÿ AST çš„èƒ½åŠ›

**ä»æºä»£ç åˆ°ç²¾ç¡®åˆ†æ”¯å‰ªæçš„å®Œæ•´æµç¨‹**

---

# ä¸ºä»€ä¹ˆé™æ€åˆ†æå·¥å…·ä¼šäº§ç”Ÿå¤§é‡è¯¯æŠ¥ï¼Ÿ

## å¸¸è§é—®é¢˜

- âŒ **æ­»ä»£ç æ£€æµ‹è¯¯æŠ¥**: å°†æ°¸ä¸æ‰§è¡Œçš„ä»£ç æ ‡è®°ä¸º"å¯èƒ½æ‰§è¡Œ"
- âŒ **ä¾èµ–åˆ†æè¿‡äºä¿å®ˆ**: è®¤ä¸ºæ‰€æœ‰åˆ†æ”¯éƒ½ä¼šè¢«æ‰§è¡Œ
- âŒ **å®‰å…¨å‘Šè­¦ä¸ç²¾ç¡®**: æ— æ³•ç¡®å®šæŸäº›ä»£ç è·¯å¾„æ°¸ä¸å¯è¾¾

## æ ¹æœ¬åŸå› 

ä¼ ç»Ÿ AST åˆ†ææ— æ³•åˆ¤å®š**å¸¸é‡é©±åŠ¨çš„åˆ†æ”¯**å“ªäº›å¯è¾¾ï¼Œå“ªäº›ä¸å¯è¾¾

---

# ä»£ç ç¤ºä¾‹ï¼šå·¥å‚æ¨¡å¼ä¸å¸¸é‡åˆ†æ”¯

```java
// å¸¸é‡å®šä¹‰
public class KbGyomConst {
    public static final String TANPO_CAL_I_K_TOJITUYAK = "01";
    public static final String TANPO_CAL_I_K_2DDTEISEI = "02";
    public static final String TANPO_CAL_I_K_3DDTEISEI = "03";
    // ... æ›´å¤šå¸¸é‡
}

// å·¥å‚æ–¹æ³•ï¼šæ ¹æ®å¸¸é‡åˆ›å»ºä¸åŒå¯¹è±¡
public TanpoCal generateTanpoCal(String sijiKbn, ...) {
    if (sijiKbn.equals(KbGyomConst.TANPO_CAL_I_K_TOJITUYAK)) {
        return new TanpoCalTodYak(...);  // å®ä¾‹åŒ–ç±» 1
    } else if (sijiKbn.equals(KbGyomConst.TANPO_CAL_I_K_2DDTEISEI)) {
        return new TanpoCal2ddTsei(...);  // å®ä¾‹åŒ–ç±» 2
    } else if (sijiKbn.equals(KbGyomConst.TANPO_CAL_I_K_3DDTEISEI)) {
        return new TanpoCal3ddTsei(...);  // å®ä¾‹åŒ–ç±» 3
    }
    // ... æ›´å¤šåˆ†æ”¯
}
```

**é—®é¢˜**: è¿è¡Œæ—¶åªä¼šæ‰§è¡Œ**ä¸€ä¸ª**åˆ†æ”¯ï¼Œä½†é™æ€åˆ†æèƒ½è¯†åˆ«å‡ºå“ªä¸€ä¸ªå—ï¼Ÿ

---

# ä¼ ç»Ÿ AST åˆ†æçš„å›°å¢ƒ

## AST çœ‹åˆ°çš„

- 6 ä¸ª if-else åˆ†æ”¯
- 6 ä¸ªç±»å®ä¾‹åŒ–è¯­å¥
- æ‰€æœ‰åˆ†æ”¯åœ¨è¯­æ³•ä¸Šéƒ½åˆæ³•

## AST **æ— æ³•**åšåˆ°çš„

- âŒ æ±‚å€¼å¸¸é‡ `KbGyomConst.TANPO_CAL_I_K_TOJITUYAK` çš„å€¼
- âŒ ç¡®å®šå‚æ•° `sijiKbn` ä¸å“ªä¸ªå¸¸é‡åŒ¹é…
- âŒ åˆ¤æ–­å“ªäº›åˆ†æ”¯æ°¸ä¸æ‰§è¡Œ

## ç»“æœ

**å¿…é¡»å‡è®¾æ‰€æœ‰ 6 ä¸ªåˆ†æ”¯éƒ½å¯è¾¾** â†’ æ‰€æœ‰ 6 ä¸ªç±»éƒ½è¢«æ ‡è®°ä¸º"å¯èƒ½è¢«å®ä¾‹åŒ–"

**è¯¯æŠ¥ç‡**: 5 ä¸ªç±»å®é™…ä¸Šæ°¸ä¸ä¼šè¢«ä½¿ç”¨ï¼Œä½†åˆ†æå·¥å…·æ— æ³•åŒºåˆ†

---

<!-- _class: lead -->

# CPG çš„è§£å†³æ–¹æ¡ˆ
## å››å±‚å›¾ç»“æ„ + å¸¸é‡æ±‚å€¼ + åˆ†æ”¯å‰ªæ

---

# CPG æ¶æ„ï¼šå››å±‚ååŒè®¾è®¡

```mermaid
flowchart TD
    Source[æºä»£ç ] --> AST[Layer 1: AST<br/>æŠ½è±¡è¯­æ³•æ ‘]
    AST --> EOG[Layer 2: EOG<br/>æ‰§è¡Œé¡ºåºå›¾]
    AST --> DFG[Layer 3: DFG<br/>æ•°æ®æµå›¾]
    EOG --> Eval[Layer 4: å¸¸é‡æ±‚å€¼]
    DFG --> Eval
    Eval --> Prune[åˆ†æ”¯å‰ªæ]
    Prune --> Result[ç²¾ç¡®å¯è¾¾æ€§ç»“æœ]

    style AST fill:#e1f5ff
    style EOG fill:#ffe1f5
    style DFG fill:#f5ffe1
    style Eval fill:#fff5e1
    style Prune fill:#ff9999
    style Result fill:#99ff99
```

**å›¾ç¤ºè¯´æ˜**:
- **Layer 1 (AST)**: æ•è·è¯­æ³•ç»“æ„,ä½œä¸ºæ‰€æœ‰åˆ†æçš„åŸºç¡€
- **Layer 2 (EOG)**: åŸºäº AST æ„å»ºæ§åˆ¶æµå›¾,è¡¨ç¤ºä»£ç æ‰§è¡Œé¡ºåº
- **Layer 3 (DFG)**: åŸºäº AST æ„å»ºæ•°æ®æµå›¾,è¿½è¸ªå€¼çš„ä¼ é€’
- **Layer 4 (æ±‚å€¼)**: åŒæ—¶åˆ©ç”¨ EOG å’Œ DFG è¿›è¡Œå¸¸é‡æ±‚å€¼ä¸åˆ†æ”¯æ¡ä»¶åˆ¤å®š
- **å‰ªæé˜¶æ®µ**: æ ‡è®°ä¸å¯è¾¾è¾¹,ç²¾ç®€å›¾ç»“æ„
- **æœ€ç»ˆç»“æœ**: ç²¾ç¡®çš„å¯è¾¾æ€§ä¿¡æ¯

**æ ¸å¿ƒæ€æƒ³**: å¸¸é‡æ±‚å€¼ + æ•°æ®æµåˆ†æ = ç²¾ç¡®åˆ†æ”¯å‰ªæ

---

# å…³é”®æ´å¯Ÿï¼šåˆ†å±‚åä½œ

| å±‚æ¬¡ | èŒè´£ | è¾“å‡º |
|------|------|------|
| **AST** | è¯­æ³•ç»“æ„è¡¨ç¤º | èŠ‚ç‚¹æ ‘ (IfStatement, CallExpression, ...) |
| **EOG** | æ§åˆ¶æµå»ºæ¨¡ | æ‰§è¡Œé¡ºåºè¾¹ (trueåˆ†æ”¯, falseåˆ†æ”¯) |
| **DFG** | æ•°æ®ä¾èµ–è¿½è¸ª | æ•°æ®æµè¾¹ (å¸¸é‡ â†’ æ¡ä»¶) |
| **æ±‚å€¼å™¨** | å¸¸é‡ä¼ æ’­ä¸æ±‚å€¼ | æ¡ä»¶å€¼ (true/false/unknown) |

**å…¬å¼**:
```
DFG(constant) â†’ Evaluate(condition) â†’ Prune(EOG) â†’ Precise(reachability)
```

---

# å®Œæ•´æµç¨‹æ¦‚è§ˆ

```mermaid
sequenceDiagram
    participant S as æºä»£ç 
    participant F as å‰ç«¯è§£æ
    participant A as ASTæ„å»º
    participant E as EOGæ„å»º
    participant D as DFGæ„å»º
    participant V as å¸¸é‡æ±‚å€¼
    participant P as åˆ†æ”¯å‰ªæ
    participant Q as æŸ¥è¯¢å¼•æ“

    S->>F: Javaæºæ–‡ä»¶
    F->>A: Tokenæµ
    A->>E: ASTèŠ‚ç‚¹
    E->>E: æ„å»ºæ§åˆ¶æµè¾¹
    E->>D: EOGå®Œæˆ
    D->>D: è¿½è¸ªæ•°æ®ä¾èµ–
    D->>V: DFGå®Œæˆ
    V->>V: ValueEvaluatoræ±‚å€¼
    V->>P: æ¡ä»¶ = true/false
    P->>P: æ ‡è®°unreachableè¾¹
    P->>Q: å›¾æ„å»ºå®Œæˆ
    Q->>Q: è‡ªåŠ¨è¿‡æ»¤ä¸å¯è¾¾è¾¹
```

**æµç¨‹è¯´æ˜**:
1. **å‰ç«¯è§£æ** (Sâ†’Fâ†’A): å°† Java æºç è§£æä¸º Token,ç„¶åæ„å»º AST
2. **å›¾æ„å»ºé˜¶æ®µ** (Aâ†’Eâ†’D): åŸºäº AST åˆ†åˆ«æ„å»º EOG (æ§åˆ¶æµ) å’Œ DFG (æ•°æ®æµ)
3. **åˆ†æé˜¶æ®µ** (Dâ†’Vâ†’P): ValueEvaluator æ±‚å€¼å¸¸é‡å¹¶åˆ¤å®šåˆ†æ”¯æ¡ä»¶,ç„¶å UnreachableEOGPass æ ‡è®°ä¸å¯è¾¾è¾¹
4. **æŸ¥è¯¢é˜¶æ®µ** (Pâ†’Q): Query API è‡ªåŠ¨è¿‡æ»¤ä¸å¯è¾¾è¾¹,è¿”å›ç²¾ç¡®çš„å¯è¾¾æ€§ç»“æœ

**å…³é”®ç‚¹**: æ•´ä¸ªæµç¨‹æ˜¯ç®¡é“å¼çš„,æ¯ä¸ªé˜¶æ®µçš„è¾“å‡ºæ˜¯ä¸‹ä¸€é˜¶æ®µçš„è¾“å…¥,æœ€ç»ˆå®ç°ä»æºç åˆ°ç²¾ç¡®å¯è¾¾æ€§çš„è‡ªåŠ¨è½¬æ¢

---

<!-- _class: lead -->

# è¯¦ç»†æ¼”ç¤º
## Scenario 1: å·¥å‚æ¨¡å¼åˆ†æ
### ä»æºç åˆ°ç²¾ç¡®ç»“æœçš„ 10 ä¸ªæ­¥éª¤

---

# æ­¥éª¤ 0: æºä»£ç å±•ç¤º

```java
// å…³é”®å¸¸é‡å®šä¹‰ (è¡Œ 11-19)
public static final String TANPO_CAL_I_K_TOJITUYAK = "01";
public static final String TANPO_CAL_I_K_2DDTEISEI = "02";
// ... æ›´å¤šå¸¸é‡

// å·¥å‚æ–¹æ³• (è¡Œ 176-210, ç®€åŒ–å±•ç¤º)
public TanpoCal generateTanpoCal(String sijiKbn, ...) {
    TanpoCal tanpoCal = null;

    if (sijiKbn.equals(KbGyomConst.TANPO_CAL_I_K_TOJITUYAK)) {   // åˆ†æ”¯ 1
        tanpoCal = new TanpoCalTodYak(...);
    } else if (sijiKbn.equals(KbGyomConst.TANPO_CAL_I_K_2DDTEISEI)) {  // åˆ†æ”¯ 2
        tanpoCal = new TanpoCal2ddTsei(...);
    } else if (sijiKbn.equals(KbGyomConst.TANPO_CAL_I_K_3DDTEISEI)) {  // åˆ†æ”¯ 3
        tanpoCal = new TanpoCal3ddTsei(...);
    }
    // ... åˆ†æ”¯ 4, 5, 6
    return tanpoCal;
}
```

**åˆ†æç›®æ ‡**: å‡è®¾ `sijiKbn` å‚æ•°å€¼ä¸º `"01"`ï¼Œå“ªä¸ªåˆ†æ”¯ä¼šæ‰§è¡Œï¼Ÿ

---

# æ­¥éª¤ 1: Java æºç è§£æ

## è§£æå™¨ä½œç”¨

- ä½¿ç”¨ JavaParser (æˆ–ç±»ä¼¼å·¥å…·) å°†æºç è½¬æ¢ä¸º Token æµ
- æ„å»ºåˆæ­¥çš„è¯­æ³•ç»“æ„

## è¾“å‡º

Parse Tree â†’ å‡†å¤‡æ„å»º AST

```
CompilationUnit
 â””â”€ ClassDeclaration: KbGyomConst
     â”œâ”€ FieldDeclaration: TANPO_CAL_I_K_TOJITUYAK = "01"
     â””â”€ ...
 â””â”€ ClassDeclaration: TanpoCalFactory
     â””â”€ MethodDeclaration: generateTanpoCal
         â””â”€ Block: { if ... else if ... }
```

<!-- æ¼”è®²è€…å¤‡æ³¨: è¿™ä¸€æ­¥æ˜¯æ ‡å‡†çš„ç¼–è¯‘å™¨å‰ç«¯å·¥ä½œï¼ŒCPG ä½¿ç”¨ Java frontend å®Œæˆ -->

---

# æ­¥éª¤ 2: æŠ½è±¡è¯­æ³•æ ‘ (AST) æ„å»º

```mermaid
graph TD
    Method[MethodDeclaration:<br/>generateTanpoCal] --> Block[Block]
    Block --> Decl[VariableDeclaration:<br/>tanpoCal = null]
    Block --> If1[IfStatement 1]
    If1 --> Cond1[Condition:<br/>sijiKbn.equals...]
    If1 --> Then1[Then: new TanpoCalTodYak]
    If1 --> Else1[Else: IfStatement 2]
    Else1 --> Cond2[Condition:<br/>sijiKbn.equals...]
    Else1 --> Then2[Then: new TanpoCal2ddTsei]
    Else1 --> Else2[Else: IfStatement 3...]

    style If1 fill:#ffe1e1
    style Else1 fill:#ffe1e1
```

**å›¾ç¤ºè¯´æ˜**:
- **æ ‘å½¢ç»“æ„**: AST ä»¥æ ‘çŠ¶ç»„ç»‡,æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªè¯­æ³•å…ƒç´ 
- **çˆ¶å­å…³ç³»**: ç®­å¤´è¡¨ç¤ºå±‚çº§å…³ç³» (ä¾‹å¦‚ Block åŒ…å« Decl å’Œ If1)
- **åµŒå¥—åˆ†æ”¯**: If-Else é“¾å±•ç°ä¸ºåµŒå¥—çš„ IfStatement èŠ‚ç‚¹

**AST ç‰¹ç‚¹**: æ•è·è¯­æ³•ç»“æ„,ä½†**ä¸åŒ…å«**æ§åˆ¶æµæˆ–æ•°æ®æµä¿¡æ¯ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼ ç»Ÿ AST å·¥å…·æ— æ³•è¿›è¡Œç²¾ç¡®çš„å¯è¾¾æ€§åˆ†æ

---

# æ­¥éª¤ 3: CPG èŠ‚ç‚¹æ„å»º

## AST â†’ CPG èŠ‚ç‚¹è½¬æ¢

AST èŠ‚ç‚¹è¢«è½¬æ¢ä¸ºå¢å¼ºçš„ CPG èŠ‚ç‚¹ï¼Œæºå¸¦æ›´ä¸°å¯Œçš„å±æ€§:

```kotlin
// CPG Node ç¤ºä¾‹
IfStatement {
    condition: BinaryOperator {
        lhs: MethodCallExpression("equals")
        rhs: Reference("KbGyomConst.TANPO_CAL_I_K_TOJITUYAK")
        operator: "equals"
    }
    thenStatement: Block { ... }
    elseStatement: IfStatement { ... }
    branchedBy: condition  // æŒ‡å‘å†³å®šåˆ†æ”¯çš„èŠ‚ç‚¹
}
```

**å¢å¼ºç‚¹**:
- ç±»å‹ä¿¡æ¯
- ç¬¦å·å¼•ç”¨ (`refersTo`)
- ä½œç”¨åŸŸä¿¡æ¯

---

# æ­¥éª¤ 4: æ‰§è¡Œé¡ºåºå›¾ (EOG) æ„å»º

```mermaid
flowchart TD
    Start[æ–¹æ³•å…¥å£] --> Decl[tanpoCal = null]
    Decl --> If1{IfStatement 1:<br/>equals TOJITUYAK?}
    If1 -->|EOG: true| B1[new TanpoCalTodYak]
    If1 -->|EOG: false| If2{IfStatement 2:<br/>equals 2DDTEISEI?}
    If2 -->|EOG: true| B2[new TanpoCal2ddTsei]
    If2 -->|EOG: false| If3{IfStatement 3:<br/>equals 3DDTEISEI?}
    If3 -->|EOG: true| B3[new TanpoCal3ddTsei]
    If3 -->|EOG: false| More[...]

    B1 --> Return[return tanpoCal]
    B2 --> Return
    B3 --> Return
    More --> Return

    style If1 fill:#fff5cc
    style If2 fill:#fff5cc
    style If3 fill:#fff5cc
```

**å›¾ç¤ºè¯´æ˜**:
- **æ§åˆ¶æµè¾¹**: ç®­å¤´è¡¨ç¤ºä»£ç å¯èƒ½çš„æ‰§è¡Œè·¯å¾„
- **åˆ†æ”¯èŠ‚ç‚¹** (è±å½¢): è¡¨ç¤ºæ¡ä»¶åˆ¤æ–­,æœ‰ true å’Œ false ä¸¤ä¸ªå‡ºè¾¹
- **EOG æ ‡ç­¾**: è¾¹ä¸Šæ ‡æ³¨ `EOG: true/false` è¡¨ç¤ºåˆ†æ”¯æ–¹å‘
- **æ±‡èšç‚¹**: æ‰€æœ‰åˆ†æ”¯æœ€ç»ˆæ±‡èšåˆ° `return` è¯­å¥

**æ­¤é˜¶æ®µ**: æ‰€æœ‰ EOG è¾¹éƒ½è¢«æ„å»º,æ‰€æœ‰åˆ†æ”¯æ ‡è®°ä¸º**æ½œåœ¨å¯è¾¾**ã€‚CPG è¿˜ä¸çŸ¥é“å“ªäº›åˆ†æ”¯å®é™…å¯è¾¾

**ä¸‹ä¸€æ­¥**: æ„å»º DFG è¿½è¸ªå¸¸é‡å€¼çš„æ¥æº

---

# æ­¥éª¤ 5: æ•°æ®æµå›¾ (DFG) æ„å»º

```mermaid
flowchart LR
    Const1["å¸¸é‡å®šä¹‰:<br/>TANPO_CAL_I_K_TOJITUYAK<br/>= '01'"] -->|DFG| Ref1["æ¡ä»¶1ä¸­çš„å¼•ç”¨"]
    Const2["å¸¸é‡å®šä¹‰:<br/>TANPO_CAL_I_K_2DDTEISEI<br/>= '02'"] -->|DFG| Ref2["æ¡ä»¶2ä¸­çš„å¼•ç”¨"]
    Const3["å¸¸é‡å®šä¹‰:<br/>TANPO_CAL_I_K_3DDTEISEI<br/>= '03'"] -->|DFG| Ref3["æ¡ä»¶3ä¸­çš„å¼•ç”¨"]

    Param["å‚æ•°: sijiKbn"] -->|DFG| Cond1["æ¡ä»¶1:<br/>sijiKbn.equals..."]
    Param -->|DFG| Cond2["æ¡ä»¶2"]
    Param -->|DFG| Cond3["æ¡ä»¶3"]

    Ref1 -->|DFG| Cond1
    Ref2 -->|DFG| Cond2
    Ref3 -->|DFG| Cond3

    style Const1 fill:#ccf5ff
    style Const2 fill:#ccf5ff
    style Const3 fill:#ccf5ff
    style Param fill:#ffcccc
```

**å›¾ç¤ºè¯´æ˜**:
- ğŸ”µ **è“è‰²èŠ‚ç‚¹**: å¸¸é‡å®šä¹‰ (ç¼–è¯‘æ—¶å·²çŸ¥å€¼)
- ğŸ”´ **çº¢è‰²èŠ‚ç‚¹**: æ–¹æ³•å‚æ•° (è¿è¡Œæ—¶ä¼ å…¥)
- â¡ï¸ **DFG ç®­å¤´**: æ•°æ®æµä¾èµ–å…³ç³» (å€¼ä»å“ªé‡Œæ¥)

**å…³é”®æœºåˆ¶**: DFG è¾¹è¿æ¥å¸¸é‡å£°æ˜ä¸åˆ†æ”¯æ¡ä»¶ï¼Œä½¿ ValueEvaluator èƒ½å¤Ÿæ²¿ç€æ•°æ®æµå›æº¯æ‰¾åˆ°å¸¸é‡çš„å®é™…å€¼ï¼Œä¸ºåç»­çš„å¸¸é‡æ±‚å€¼æä¾›åŸºç¡€

---

# æ­¥éª¤ 6: å¸¸é‡æ±‚å€¼ (Constant Evaluation)

## ValueEvaluator å·¥ä½œæµç¨‹

1. æ²¿ç€ DFG è¾¹å›æº¯åˆ°å­—é¢é‡
2. æ±‚å€¼å¸¸é‡è¡¨è¾¾å¼

| å¸¸é‡åç§° | æ±‚å€¼ç»“æœ |
|---------|---------|
| `TANPO_CAL_I_K_TOJITUYAK` | `"01"` âœ… |
| `TANPO_CAL_I_K_2DDTEISEI` | `"02"` âœ… |
| `TANPO_CAL_I_K_3DDTEISEI` | `"03"` âœ… |
| `TANPO_CAL_I_K_4DDTEISEI` | `"04"` âœ… |
| `TANPO_CAL_I_K_BEANSKYAK` | `"05"` âœ… |
| `TANPO_CAL_I_K_HOSYOGNYUSKN` | `"06"` âœ… |

**å®ç°ä½ç½®**: `/cpg-core/.../evaluation/ValueEvaluator.kt`

<!-- æ¼”è®²è€…å¤‡æ³¨: ValueEvaluator æ”¯æŒå­—é¢é‡ã€ç®—æœ¯è¿ç®—ã€æ¯”è¾ƒè¿ç®—ç­‰åŸºç¡€èƒ½åŠ› -->

---

# æ­¥éª¤ 7: åˆ†æ”¯æ¡ä»¶æ±‚å€¼

## å‡è®¾å‚æ•° sijiKbn = "01"

å¯¹æ¯ä¸ªæ¡ä»¶æ±‚å€¼:

| æ¡ä»¶ | æ±‚å€¼è¿‡ç¨‹ | ç»“æœ |
|------|---------|------|
| `sijiKbn.equals("01")` | `"01".equals("01")` | **âœ… true** |
| `sijiKbn.equals("02")` | `"01".equals("02")` | âŒ false |
| `sijiKbn.equals("03")` | `"01".equals("03")` | âŒ false |
| `sijiKbn.equals("04")` | `"01".equals("04")` | âŒ false |
| `sijiKbn.equals("05")` | `"01".equals("05")` | âŒ false |
| `sijiKbn.equals("06")` | `"01".equals("06")` | âŒ false |

**ç»“è®º**: åªæœ‰**åˆ†æ”¯ 1** çš„æ¡ä»¶ä¸º trueï¼Œå…¶ä»–æ‰€æœ‰åˆ†æ”¯æ¡ä»¶ä¸º false

---

# æ­¥éª¤ 8: EOG è¾¹å‰ªæ (Branch Pruning)

```mermaid
flowchart TD
    Start[æ–¹æ³•å…¥å£] --> If1{IfStatement 1}
    If1 -->|true<br/>âœ… å¯è¾¾| B1[new TanpoCalTodYak]
    If1 -.->|false<br/>âŒ ä¸å¯è¾¾| If2{IfStatement 2}
    If2 -.->|true<br/>âŒ ä¸å¯è¾¾| B2[new TanpoCal2ddTsei]
    If2 -.->|false<br/>âŒ ä¸å¯è¾¾| If3[...]

    B1 --> Return[return]

    style B1 fill:#99ff99
    style If2 fill:#cccccc
    style B2 fill:#cccccc
    style If3 fill:#cccccc

    linkStyle 1 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
    linkStyle 2 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
    linkStyle 3 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
```

**å›¾ç¤ºè¯´æ˜**:
- âœ… **å®çº¿ + ç»¿è‰²**: å¯è¾¾è·¯å¾„ (æ¡ä»¶æ±‚å€¼ä¸º true)
- âŒ **è™šçº¿ + ç°è‰²**: ä¸å¯è¾¾è·¯å¾„ (æ¡ä»¶æ±‚å€¼ä¸º false)
- **å‰ªææ•ˆæœ**: 5 ä¸ªä¸å¯è¾¾åˆ†æ”¯è¢«æ ‡è®°,åªæœ‰ 1 ä¸ªå¯è¾¾åˆ†æ”¯ä¿ç•™

**å…³é”®æœºåˆ¶**: **UnreachableEOGPass** æ ¹æ® ValueEvaluator çš„æ±‚å€¼ç»“æœ,åœ¨ EOG è¾¹ä¸Šè®¾ç½® `unreachable = true` å±æ€§,ä½†ä¸åˆ é™¤è¾¹ (ä¿æŒå›¾å®Œæ•´æ€§)

**æ–‡ä»¶ä½ç½®**: `/cpg-analysis/.../passes/UnreachableEOGPass.kt`

---

# æ­¥éª¤ 9: å¯è¾¾æ€§åˆ†æç»“æœ

## æœ€ç»ˆå›¾çŠ¶æ€

åªæœ‰**ç»¿è‰²è·¯å¾„**ä¸­çš„èŠ‚ç‚¹å¯è¾¾:

```mermaid
flowchart TD
    Start[æ–¹æ³•å…¥å£] --> Decl[tanpoCal = null]
    Decl --> If1[IfStatement 1]
    If1 --> B1[new TanpoCalTodYak]
    B1 --> Return[return tanpoCal]

    style Start fill:#99ff99
    style Decl fill:#99ff99
    style If1 fill:#99ff99
    style B1 fill:#99ff99
    style Return fill:#99ff99
```

**å›¾ç¤ºè¯´æ˜**:
- ğŸŸ¢ **ç»¿è‰²èŠ‚ç‚¹**: ç²¾ç¡®å¯è¾¾çš„æ‰§è¡Œè·¯å¾„ (æ ¹æ®å¸¸é‡æ±‚å€¼ç¡®å®š)
- **è·¯å¾„é•¿åº¦**: ä»… 5 ä¸ªèŠ‚ç‚¹ (ç›¸æ¯”å®Œæ•´ EOG çš„ 15+ èŠ‚ç‚¹)
- **ç²¾ç®€æ•ˆæœ**: ä¸å¯è¾¾èŠ‚ç‚¹è¢«è¿‡æ»¤,ä»…ä¿ç•™çœŸæ­£ä¼šæ‰§è¡Œçš„ä»£ç 

**åˆ†æç»“æœ**:

âœ… **å¯è¾¾ç±»**: `TanpoCalTodYak` (å”¯ä¸€ä¼šè¢«å®ä¾‹åŒ–çš„ç±»)

âŒ **ä¸å¯è¾¾ç±»** (5ä¸ª,æ°¸ä¸ä¼šè¢«å®ä¾‹åŒ–):
- `TanpoCal2ddTsei`
- `TanpoCal3ddTsei`
- `TanpoCal4ddTsei`
- `TanpoCalNchBeans`
- `TanpoCalHosy_gNyuskn`

---

# æ­¥éª¤ 10: å¯¹æ¯”åˆ†æ - AST vs CPG

| åˆ†ææ–¹æ³• | å¯è¾¾ç±»æ•°é‡ | ç²¾ç¡®åº¦ | è¯¯æŠ¥æ•° |
|---------|-----------|-------|--------|
| **ä¼ ç»Ÿ AST** | 6 ä¸ª (æ‰€æœ‰åˆ†æ”¯) | ä½ (è¿‡åº¦è¿‘ä¼¼) | 5 ä¸ª (83%) |
| **CPG + å¸¸é‡æ±‚å€¼** | 1 ä¸ª (ä»…çœŸåˆ†æ”¯) | é«˜ (ç²¾ç¡®) | 0 ä¸ª |

## å½±å“

- âœ… **å‡å°‘ 83% çš„è¯¯æŠ¥**
- âœ… **ç²¾ç¡®çš„ä¾èµ–è¿½è¸ª**: åªéœ€å…³æ³¨çœŸæ­£ä¼šè¢«å®ä¾‹åŒ–çš„ç±»
- âœ… **æé«˜ä»£ç å®¡æŸ¥æ•ˆç‡**: ä¸å†æµªè´¹æ—¶é—´å®¡æŸ¥æ°¸ä¸æ‰§è¡Œçš„ä»£ç 

**ç»“è®º**: CPG é€šè¿‡å¸¸é‡æ±‚å€¼ä¸åˆ†æ”¯å‰ªæï¼Œå®ç°äº†ä¼ ç»Ÿ AST æ— æ³•è¾¾åˆ°çš„ç²¾åº¦

---

# å®Œæ•´æµç¨‹å›é¡¾

```mermaid
sequenceDiagram
    autonumber
    participant Src as æºä»£ç 
    participant AST as ASTå±‚
    participant EOG as EOGå±‚
    participant DFG as DFGå±‚
    participant Eval as æ±‚å€¼å™¨
    participant Query as æŸ¥è¯¢å¼•æ“
    participant User as ç”¨æˆ·

    Src->>AST: è§£æ
    AST->>EOG: æ„å»ºæ§åˆ¶æµ
    Note over EOG: æ‰€æœ‰åˆ†æ”¯æ ‡è®°ä¸ºå¯è¾¾
    AST->>DFG: æ„å»ºæ•°æ®æµ
    Note over DFG: è¿½è¸ªå¸¸é‡ â†’ æ¡ä»¶
    DFG->>Eval: æ±‚å€¼æ¡ä»¶
    Eval->>Eval: "01".equals("01") = true
    Eval->>EOG: æ ‡è®° false åˆ†æ”¯ä¸å¯è¾¾
    User->>Query: executionPath(start, predicate)
    Query->>Query: è‡ªåŠ¨è¿‡æ»¤ä¸å¯è¾¾è¾¹
    Query-->>User: è¿”å›ç²¾ç¡®è·¯å¾„
```

**å›¾ç¤ºè¯´æ˜**:
- **åºåˆ—å›¾**: å±•ç¤ºå„å±‚ååŒå·¥ä½œçš„æ—¶é—´é¡ºåº
- **Note**: æ ‡æ³¨å„é˜¶æ®µçš„å…³é”®çŠ¶æ€å˜åŒ–
- **åŒå‘ç®­å¤´**: Query è¿”å›ç»“æœç»™ç”¨æˆ·

**åœºæ™¯ 1 æ€»ç»“ - 10 æ­¥éª¤å›é¡¾**:
1. âœ… **è§£æ** â†’ Token æµ
2. âœ… **AST** â†’ è¯­æ³•æ ‘
3. âœ… **CPG èŠ‚ç‚¹** â†’ å¢å¼ºå±æ€§
4. âœ… **EOG** â†’ æ§åˆ¶æµ (æ‰€æœ‰åˆ†æ”¯å¯è¾¾)
5. âœ… **DFG** â†’ æ•°æ®æµ (å¸¸é‡ â†’ æ¡ä»¶)
6. âœ… **å¸¸é‡æ±‚å€¼** â†’ è·å–å­—é¢é‡å€¼
7. âœ… **æ¡ä»¶æ±‚å€¼** â†’ åˆ¤å®šåˆ†æ”¯æ–¹å‘
8. âœ… **EOG å‰ªæ** â†’ æ ‡è®°ä¸å¯è¾¾è¾¹
9. âœ… **ç²¾ç¡®ç»“æœ** â†’ 1 å¯è¾¾ + 5 ä¸å¯è¾¾
10. âœ… **å¯¹æ¯”åˆ†æ** â†’ 83% è¯¯æŠ¥å‡å°‘

**ååŒå…³é”®**: å›¾å±‚è´Ÿè´£æ ‡è®° (unreachable),æŸ¥è¯¢å±‚è´Ÿè´£è¿‡æ»¤ (FilterUnreachableEOG)

---

<!-- _class: lead -->

# æ›´å¤šåœºæ™¯
## å¸¸é‡é©±åŠ¨åˆ†æ”¯çš„å¤šæ ·æ€§

---

# åœºæ™¯ 2: å¸¸é‡ä¼ é€’ç»™å¤–éƒ¨æ–¹æ³•

```java
// å¸¸é‡å®šä¹‰
public static final String DIL_OUT_F_GAMN = "SCREEN";
public static final String DIL_OUT_F_CSV = "CSV";
public static final String DIL_OUT_F_PDF = "PDF";

// å¤–éƒ¨æ–¹æ³•å†…éƒ¨åˆ†æ”¯
public static TaskResult getList(..., String outputFormat) {
    if (outputFormat.equals(AzBvaGyomConst.DIL_OUT_F_GAMN)) {
        System.out.println("Generating screen output");  // åˆ†æ”¯ 1
        return new TaskResult(TaskResult.OK);
    } else if (outputFormat.equals(AzBvaGyomConst.DIL_OUT_F_CSV)) {
        System.out.println("Generating CSV output");     // åˆ†æ”¯ 2
        return new TaskResult(TaskResult.OK);
    } else if (outputFormat.equals(AzBvaGyomConst.DIL_OUT_F_PDF)) {
        System.out.println("Generating PDF output");     // åˆ†æ”¯ 3
        return new TaskResult(TaskResult.OK);
    }
    return new TaskResult(TaskResult.NG);
}

// è°ƒç”¨å¤„ä¼ å…¥å¸¸é‡
TaskResult result = getList(..., AzBvaGyomConst.DIL_OUT_F_GAMN);
```

**æŒ‘æˆ˜**: è·¨æ–¹æ³•è¾¹ç•Œçš„å¸¸é‡ä¼ æ’­

---

# åœºæ™¯ 2: CPG å¦‚ä½•å¤„ç†

## æ•°æ®æµè¿½è¸ª

```mermaid
flowchart LR
    Const[å¸¸é‡:<br/>DIL_OUT_F_GAMN<br/>= "SCREEN"] -->|DFG| Arg[è°ƒç”¨å‚æ•°:<br/>outputFormat]
    Arg -->|DFG è·¨æ–¹æ³•| Param[æ–¹æ³•å‚æ•°:<br/>outputFormat]
    Param -->|DFG| Cond1[Condition 1:<br/>equals GAMN]
    Param -->|DFG| Cond2[Condition 2:<br/>equals CSV]
    Param -->|DFG| Cond3[Condition 3:<br/>equals PDF]

    style Const fill:#ccf5ff
    style Arg fill:#ffffcc
    style Param fill:#ffccff
```

**å›¾ç¤ºè¯´æ˜**:
- ğŸ”µ **è“è‰²**: å¸¸é‡å®šä¹‰ (`"SCREEN"`)
- ğŸŸ¡ **é»„è‰²**: è°ƒç”¨å‚æ•° (ä¼ é€’å¸¸é‡)
- ğŸŸ£ **ç´«è‰²**: æ–¹æ³•å‚æ•° (æ¥æ”¶å¸¸é‡)
- â¡ï¸ **è·¨æ–¹æ³• DFG**: å¸¸é‡ä»è°ƒç”¨å¤„ä¼ é€’åˆ°è¢«è°ƒæ–¹æ³•å†…éƒ¨

**CPG ä¼˜åŠ¿**: DFG å¯ä»¥è¿½è¸ªå¸¸é‡é€šè¿‡æ–¹æ³•è°ƒç”¨ä¼ é€’ (è¿‡ç¨‹é—´æ•°æ®æµåˆ†æ)

**åˆ†æè¿‡ç¨‹** (ç±»æ¯”åœºæ™¯ 1):
1. **DFG è¿½è¸ª**: `"SCREEN"` â†’ è°ƒç”¨å‚æ•° â†’ æ–¹æ³•å‚æ•° â†’ æ¡ä»¶1/2/3
2. **å¸¸é‡æ±‚å€¼**: `"SCREEN".equals("SCREEN")` = true, å…¶ä»– = false
3. **EOG å‰ªæ**: æ ‡è®°åˆ†æ”¯ 2ã€3 ä¸å¯è¾¾
4. **ç²¾ç¡®ç»“æœ**: åªæœ‰åˆ†æ”¯ 1 å¯è¾¾

**ç»“æœ**:
- åˆ†æ”¯ 1 (SCREEN) âœ… å¯è¾¾ â†’ è¾“å‡º "Generating screen output"
- åˆ†æ”¯ 2 (CSV) âŒ ä¸å¯è¾¾ â†’ ä»£ç æ°¸ä¸æ‰§è¡Œ
- åˆ†æ”¯ 3 (PDF) âŒ ä¸å¯è¾¾ â†’ ä»£ç æ°¸ä¸æ‰§è¡Œ

**å…³é”®å·®å¼‚ vs åœºæ™¯ 1**: éœ€è¦**è¿‡ç¨‹é—´åˆ†æ**èƒ½åŠ›,CPG Query API æ”¯æŒ `Interprocedural()` scope

<!-- æ¼”è®²è€…å¤‡æ³¨: å¼ºè°ƒ DFG è·¨æ–¹æ³•è¾¹ç•Œçš„èƒ½åŠ›,è¿™æ˜¯ CPG ç›¸æ¯”ä¼ ç»Ÿå·¥å…·çš„é‡è¦ä¼˜åŠ¿ -->

---

# åœºæ™¯ 3: åµŒå¥—æ–¹æ³•è°ƒç”¨é“¾

```java
// å†…éƒ¨å¼•æ“æ–¹æ³•
public TaskResult executeTanpoCal(..., String calculationType, ...) {
    if (calculationType.equals(KbGyomConst.TANPO_CAL_I_K_YOKUJITU)) {
        System.out.println("Executing next-day calculation");  // åˆ†æ”¯ 1
        return new TaskResult(TaskResult.OK);
    } else if (calculationType.equals(KbGyomConst.TANPO_CAL_I_K_IMMEDIATE)) {
        System.out.println("Executing immediate calculation");  // åˆ†æ”¯ 2
        return new TaskResult(TaskResult.OK);
    } else if (calculationType.equals(KbGyomConst.TANPO_CAL_I_K_MONTHLY)) {
        System.out.println("Executing monthly calculation");    // åˆ†æ”¯ 3
        return new TaskResult(TaskResult.OK);
    }
    return new TaskResult(TaskResult.NG);
}

// æœåŠ¡å±‚è°ƒç”¨
public void processDepositCalculation(...) {
    TaskResult result = engine.executeTanpoCal(
        ...,
        KbGyomConst.TANPO_CAL_I_K_YOKUJITU,  // ä¼ å…¥å¸¸é‡
        ...
    );
}
```

**æŒ‘æˆ˜**: å¤šå±‚è°ƒç”¨æ ˆä¸­çš„å¸¸é‡ä¼ æ’­

---

# åœºæ™¯ 3: CPG åˆ†æè¿‡ç¨‹

## æ­¥éª¤ 1-2: DFG å¤šå±‚è¿½è¸ª

```mermaid
flowchart TD
    Const["å¸¸é‡å®šä¹‰:<br/>TANPO_CAL_I_K_YOKUJITU<br/>= '07'"]
    Caller["æœåŠ¡å±‚<br/>processDepositCalculation"]
    Arg["è°ƒç”¨å‚æ•°"]
    Method["å¼•æ“æ–¹æ³•<br/>executeTanpoCal"]
    Param["æ–¹æ³•å‚æ•°:<br/>calculationType"]
    Cond1["æ¡ä»¶1:<br/>equals YOKUJITU"]
    Cond2["æ¡ä»¶2:<br/>equals IMMEDIATE"]
    Cond3["æ¡ä»¶3:<br/>equals MONTHLY"]

    Const -->|"DFG"| Arg
    Arg -->|"DFG è·¨æ–¹æ³•"| Param
    Param -->|"DFG"| Cond1
    Param -->|"DFG"| Cond2
    Param -->|"DFG"| Cond3

    style Const fill:#ccf5ff
    style Caller fill:#ffe1cc
    style Method fill:#ffe1cc
    style Param fill:#ffccff
```

**å›¾ç¤ºè¯´æ˜**:
- **å¸¸é‡** (è“è‰²) â†’ **è°ƒç”¨å‚æ•°** â†’ **æ–¹æ³•å‚æ•°** (ç´«è‰²) â†’ **æ¡ä»¶**
- **DFG è·¨æ–¹æ³•è¾¹**: è¿æ¥ä¸åŒæ–¹æ³•æ ˆå±‚çš„æ•°æ®æµ
- **å¤šå±‚ä¼ æ’­**: å¸¸é‡ä»å®šä¹‰å¤„ç»è¿‡ 2 å±‚æ–¹æ³•è°ƒç”¨åˆ°è¾¾æ¡ä»¶åˆ¤æ–­

---

## æ­¥éª¤ 3-4: å¸¸é‡æ±‚å€¼ä¸åˆ†æ”¯å‰ªæ

**å‡è®¾**: `calculationType` å€¼ä¸º `"07"` (TANPO_CAL_I_K_YOKUJITU)

| æ¡ä»¶ | æ±‚å€¼ | ç»“æœ |
|------|------|------|
| `calculationType.equals("07")` | `"07".equals("07")` | âœ… true |
| `calculationType.equals("08")` | `"07".equals("08")` | âŒ false |
| `calculationType.equals("09")` | `"07".equals("09")` | âŒ false |

## æ­¥éª¤ 5: EOG å‰ªæç»“æœ

```mermaid
flowchart TD
    Entry["æ–¹æ³•å…¥å£<br/>executeTanpoCal"] --> If1{æ¡ä»¶1:<br/>YOKUJITU?}
    If1 -->|"âœ… true"| Branch1["è¾“å‡º:<br/>next-day calculation"]
    If1 -.->|"âŒ false"| If2{æ¡ä»¶2}
    If2 -.->|"âŒ false"| Branch2["immediate calculation"]
    If2 -.->|"âŒ false"| If3{æ¡ä»¶3}
    If3 -.->|"âŒ false"| Branch3["monthly calculation"]

    Branch1 --> Return["return OK"]

    style Branch1 fill:#99ff99
    style If2 fill:#cccccc
    style Branch2 fill:#cccccc
    style If3 fill:#cccccc
    style Branch3 fill:#cccccc

    linkStyle 1 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
    linkStyle 2 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
    linkStyle 3 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
    linkStyle 4 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
```

**ç»“æœ**:
- âœ… **å¯è¾¾**: åˆ†æ”¯ 1 (next-day calculation)
- âŒ **ä¸å¯è¾¾**: åˆ†æ”¯ 2ã€3 (2/3 = 67% å‰ªæç‡)

**å…³é”®**: åœºæ™¯ 3 å±•ç¤ºäº† CPG å¯¹**å¤šå±‚è°ƒç”¨æ ˆ**ä¸­å¸¸é‡ä¼ æ’­çš„æ”¯æŒ,è¿™åœ¨åµŒå¥—æ¶æ„ (æœåŠ¡å±‚ â†’ å¼•æ“å±‚) çš„ç³»ç»Ÿä¸­éå¸¸å¸¸è§

---

# åœºæ™¯ 4: æšä¸¾å¼å¸¸é‡æ¯”è¾ƒé“¾

```java
public int configureOutput(String outputType, String processingMode, int validationResult) {
    if (outputType.equals(OutputConstants.FORMAT_SCREEN)) {        // Level 1
        if (processingMode.equals(ProcessingMode.MODE_ONLINE)) {   // Level 2
            if (validationResult == DataValidator.VALID) {         // Level 3
                return 1;  // Path 1
            } else {
                return 0;  // Path 2
            }
        } else if (processingMode.equals(ProcessingMode.MODE_BATCH)) {
            return 2;  // Path 3
        }
    } else if (outputType.equals(OutputConstants.FORMAT_CSV)) {
        if (processingMode.equals(ProcessingMode.MODE_BATCH)) {
            return 3;  // Path 4
        } else if (processingMode.equals(ProcessingMode.MODE_ASYNC)) {
            return 4;  // Path 5
        }
    } else if (outputType.equals(OutputConstants.FORMAT_XML)) {
        return 5;  // Path 6
    } else if (outputType.equals(OutputConstants.FORMAT_JSON)) {
        return 6;  // Path 7
    }
    return -1;  // Path 8 (default)
}
```

**å¤æ‚åº¦**: 8 æ¡å¯èƒ½è·¯å¾„ï¼Œå¤šå±‚åµŒå¥—æ¡ä»¶

---

# åœºæ™¯ 4: ç²¾ç¡®è·¯å¾„å‰ªæ

## å‡è®¾å¸¸é‡è¾“å…¥

```kotlin
outputType = OutputConstants.FORMAT_SCREEN      // "S"
processingMode = ProcessingMode.MODE_ONLINE     // "O"
validationResult = DataValidator.VALID          // 1
```

## æ­¥éª¤ 1: EOG å®Œæ•´å›¾ (å‰ªæå‰)

```mermaid
flowchart TD
    Start["æ–¹æ³•å…¥å£"] --> C1{Level 1:<br/>SCREEN?}
    C1 -->|true| C2{Level 2:<br/>ONLINE?}
    C1 -->|false| C5{CSV?}

    C2 -->|true| C3{Level 3:<br/>VALID?}
    C2 -->|false| C4{BATCH?}

    C3 -->|true| P1["Path 1:<br/>return 1"]
    C3 -->|false| P2["Path 2:<br/>return 0"]
    C4 -->|true| P3["Path 3:<br/>return 2"]

    C5 -->|true| C6{BATCH?}
    C5 -->|false| C7{XML?}

    C6 -->|true| P4["Path 4:<br/>return 3"]
    C6 -->|false| C8{ASYNC?}
    C8 -->|true| P5["Path 5:<br/>return 4"]

    C7 -->|true| P6["Path 6:<br/>return 5"]
    C7 -->|false| C9{JSON?}
    C9 -->|true| P7["Path 7:<br/>return 6"]
    C9 -->|false| P8["Path 8:<br/>return -1"]

    style C1 fill:#fff5cc
    style C2 fill:#fff5cc
    style C3 fill:#fff5cc
```

**å›¾ç¤º**: å®Œæ•´ EOG æœ‰ 8 æ¡è·¯å¾„,æ‰€æœ‰åˆ†æ”¯åˆå§‹æ ‡è®°ä¸ºå¯è¾¾

---

## æ­¥éª¤ 2-3: å¸¸é‡æ±‚å€¼ä¸é€å±‚å‰ªæ

**Level 1 æ±‚å€¼**:
- `outputType.equals("SCREEN")` â†’ `"S".equals("S")` = âœ… **true**
- **å‰ªæ**: CSV, XML, JSON åˆ†æ”¯ (Path 4-8) å…¨éƒ¨ä¸å¯è¾¾

**Level 2 æ±‚å€¼** (è¿›å…¥ SCREEN åˆ†æ”¯):
- `processingMode.equals("ONLINE")` â†’ `"O".equals("O")` = âœ… **true**
- **å‰ªæ**: BATCH åˆ†æ”¯ (Path 3) ä¸å¯è¾¾

**Level 3 æ±‚å€¼** (è¿›å…¥ ONLINE åˆ†æ”¯):
- `validationResult == 1` â†’ `1 == 1` = âœ… **true**
- **å‰ªæ**: else åˆ†æ”¯ (Path 2) ä¸å¯è¾¾

## æ­¥éª¤ 4: å‰ªæåçš„ç²¾ç¡® EOG

```mermaid
flowchart TD
    Start["æ–¹æ³•å…¥å£"] --> C1{Level 1:<br/>SCREEN?}
    C1 -->|"âœ… true"| C2{Level 2:<br/>ONLINE?}
    C1 -.->|"âŒ false"| Others["å…¶ä»–åˆ†æ”¯..."]

    C2 -->|"âœ… true"| C3{Level 3:<br/>VALID?}
    C2 -.->|"âŒ false"| Batch["BATCH åˆ†æ”¯"]

    C3 -->|"âœ… true"| P1["Path 1:<br/>return 1"]
    C3 -.->|"âŒ false"| P2["Path 2"]

    style P1 fill:#99ff99
    style Others fill:#cccccc
    style Batch fill:#cccccc
    style P2 fill:#cccccc

    linkStyle 1 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
    linkStyle 3 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
    linkStyle 5 stroke:#999,stroke-width:2px,stroke-dasharray: 5 5
```

## CPG åˆ†æç»“æœ

| è·¯å¾„ | æ¡ä»¶é“¾ | æ±‚å€¼ç»“æœ | å¯è¾¾æ€§ |
|------|--------|---------|--------|
| Path 1 | SCREEN && ONLINE && VALID | `true && true && true` | âœ… å¯è¾¾ |
| Path 2 | SCREEN && ONLINE && !VALID | `true && true && false` | âŒ ä¸å¯è¾¾ |
| Path 3 | SCREEN && BATCH | `true && false` | âŒ ä¸å¯è¾¾ |
| Path 4 | CSV && BATCH | `false && ...` | âŒ ä¸å¯è¾¾ |
| Path 5 | CSV && ASYNC | `false && ...` | âŒ ä¸å¯è¾¾ |
| Path 6 | XML | `false` | âŒ ä¸å¯è¾¾ |
| Path 7 | JSON | `false` | âŒ ä¸å¯è¾¾ |
| Path 8 | default | (ä¸Šè¿°éƒ½å¤±è´¥) | âŒ ä¸å¯è¾¾ |

**å‰ªæç‡**: 7/8 = **87.5%** çš„è·¯å¾„è¢«è¯æ˜ä¸å¯è¾¾

**å…³é”®æ´å¯Ÿ**: åœºæ™¯ 4 å±•ç¤ºäº† CPG å¯¹**å¤šå±‚åµŒå¥—æ¡ä»¶**çš„ç²¾ç¡®å‰ªæèƒ½åŠ›ã€‚æ¯ä¸€å±‚æ¡ä»¶åˆ¤å®šéƒ½ä¼šè¿›ä¸€æ­¥ç¼©å°å¯è¾¾è·¯å¾„é›†åˆ,æœ€ç»ˆåªä¿ç•™ä¸€æ¡ç²¾ç¡®è·¯å¾„

---

# çœŸå®åº”ç”¨åœºæ™¯ï¼šé‡‘èç³»ç»Ÿ

## ä¸ºä»€ä¹ˆè¿™ç§æ¨¡å¼å¸¸è§ï¼Ÿ

- ğŸ“Š **é…ç½®é©±åŠ¨**: ä¸šåŠ¡é€»è¾‘ç”±é…ç½®å¸¸é‡æ§åˆ¶
- ğŸ¦ **è®¡ç®—ç±»å‹**: ä¸åŒçš„é‡‘èè®¡ç®—æ–¹æ³• (åˆ©æ¯ã€æ‹…ä¿ã€è´·æ¬¾)
- ğŸ“ **æŠ¥è¡¨æ ¼å¼**: PDF, CSV, Excel, Screen è¾“å‡º
- âš™ï¸ **å¤„ç†æ¨¡å¼**: Batch, Online, Async æ‰§è¡Œ
- âœ… **åˆè§„è¦æ±‚**: éœ€è¦ç²¾ç¡®çš„ä¾èµ–åˆ†æç”¨äºå®¡è®¡

## æ•°æ®

åœ¨å…¸å‹çš„é‡‘èç³»ç»Ÿä¸­:
- 40-60% çš„åˆ†æ”¯æ˜¯å¸¸é‡é©±åŠ¨çš„
- ä¼ ç»Ÿ AST åˆ†æä¼šäº§ç”Ÿå¤§é‡è¯¯æŠ¥
- CPG å¯ä»¥å‡å°‘ **70-85%** çš„è¯¯æŠ¥

---

<!-- _class: lead -->

# å®æ–½ä¸å·¥å…·
## å¦‚ä½•åœ¨ CPG ä¸­å¯ç”¨ç²¾ç¡®å¯è¾¾æ€§åˆ†æ

---

# å¦‚ä½•å¯ç”¨ï¼šPass é…ç½®

```kotlin
import de.fraunhofer.aisec.cpg.TranslationConfiguration
import de.fraunhofer.aisec.cpg.TranslationManager
import de.fraunhofer.aisec.cpg.passes.UnreachableEOGPass

val config = TranslationConfiguration.builder()
    .sourceLocations(File("src/main/java"))
    .defaultPasses()  // åŒ…å« EOGPass, DFGPass
    .registerPass<UnreachableEOGPass>()  // å¯ç”¨å¸¸é‡æ±‚å€¼ä¸åˆ†æ”¯å‰ªæ
    .build()

val result = TranslationManager.builder()
    .config(config)
    .build()
    .analyze()
    .get()
```

**Pass ä¾èµ–**: `UnreachableEOGPass` ä¾èµ–äº `ControlFlowSensitiveDFGPass`

**è‡ªåŠ¨æ‰§è¡Œ**: Pass ç³»ç»Ÿç¡®ä¿æ­£ç¡®çš„æ‰§è¡Œé¡ºåº

---

# ä½¿ç”¨ Query API æŸ¥è¯¢å¯è¾¾æ€§

```kotlin
import de.fraunhofer.aisec.cpg.query.*

// æŸ¥è¯¢ï¼šä» startNode åˆ° endNode æ˜¯å¦å­˜åœ¨å¯è¾¾è·¯å¾„
val isReachable = executionPath(
    startNode = source,
    predicate = { it == sink },
    type = May,                    // è‡³å°‘ä¸€æ¡è·¯å¾„æ»¡è¶³
    scope = Interprocedural()      // è·¨å‡½æ•°åˆ†æ
)

if (isReachable.value) {
    println("å­˜åœ¨å¯è¾¾è·¯å¾„")
    println(isReachable.printNicely())  // æ‰“å°è¯¦ç»†è·¯å¾„
} else {
    println("ä¸å¯è¾¾")
}
```

**å…³é”®**: `executionPath` é»˜è®¤ä½¿ç”¨ `FilterUnreachableEOG`ï¼Œ**è‡ªåŠ¨è¿‡æ»¤**ä¸å¯è¾¾è¾¹

**å‚è€ƒ**: Query API DSL æ–‡æ¡£ (sem-004)

---

# è¾“å‡ºä¸å¯è§†åŒ–

## æ£€æŸ¥ä¸å¯è¾¾è¾¹

```kotlin
val unreachableEdges = result.allNodes<IfStatement>()
    .flatMap { it.nextEOGEdges }
    .filter { it.unreachable }

unreachableEdges.forEach { edge ->
    println("ä¸å¯è¾¾è¾¹: ${edge.start.location} -> ${edge.end.location}")
    println("  åˆ†æ”¯: ${edge.branch}")  // true/false
}
```

## è¾“å‡ºç¤ºä¾‹

```
ä¸å¯è¾¾è¾¹: TanpoCalFactory.java:194 -> TanpoCalFactory.java:196
  åˆ†æ”¯: false
  åŸå› : æ¡ä»¶æ°¸è¿œä¸º true, false åˆ†æ”¯ä¸å¯è¾¾
```

## é›†æˆ

- IDE æ’ä»¶: é«˜äº®ä¸å¯è¾¾ä»£ç 
- CI/CD: ç”Ÿæˆæ­»ä»£ç æŠ¥å‘Š
- å¯¼å‡ºæ ¼å¼: JSON, GraphML, CSV

---

# æ€§èƒ½è€ƒè™‘ä¸å±€é™æ€§

## æ€§èƒ½

| é˜¶æ®µ | å¼€é”€ | ä¼˜åŒ–å»ºè®® |
|------|------|---------|
| EOG/DFG æ„å»º | ä¸­ç­‰ | å·²ä¼˜åŒ–ï¼Œå¯æ‰©å±•åˆ°å¤§å‹é¡¹ç›® |
| å¸¸é‡æ±‚å€¼ | ä½ | ValueEvaluator ç®€å•å¿«é€Ÿ |
| è¿‡ç¨‹é—´åˆ†æ | é«˜ | é™åˆ¶è°ƒç”¨æ·±åº¦ (`maxCallDepth`) |

## å±€é™æ€§

- âŒ **åŠ¨æ€å€¼**: è¿è¡Œæ—¶è¾“å…¥ã€åå°„ã€åŠ¨æ€åŠ è½½
- âŒ **å¤æ‚æ•°æ®ç»“æ„**: æ•°ç»„ã€å¯¹è±¡å­—æ®µçš„å¤æ‚æ“ä½œ
- âŒ **å‡½æ•°è°ƒç”¨**: æ— æ³•å†…è”å‡½æ•°ä½“ (æœªæ¥å¯å¢å¼º)
- âš ï¸ **å¸ƒå°”è¿ç®—**: `&&`, `||`, `!` å½“å‰æœªå®ç° (å¯å¿«é€Ÿæ·»åŠ )

## å»ºè®®

âœ… ç”¨äºé…ç½®å¸¸é‡ã€æšä¸¾ã€ç¼–è¯‘æ—¶å·²çŸ¥å€¼
âš ï¸ ä¸æœŸæœ›å¤„ç†æ‰€æœ‰åœºæ™¯ï¼Œä½†èƒ½è¦†ç›– 35-60% çš„å¸¸é‡æ¡ä»¶

---

<!-- _class: lead -->

# æ€»ç»“ä¸å±•æœ›

---

# CPG çš„æ ¸å¿ƒä¼˜åŠ¿

## æŠ€æœ¯ä¼˜åŠ¿

- âœ… **å¤šå±‚å›¾ç»“æ„** (AST + EOG + DFG + æ±‚å€¼) ååŒå·¥ä½œ
- âœ… **å¸¸é‡ä¼ æ’­ä¸åˆ†æ”¯å‰ªæ** å‡å°‘è¯¯æŠ¥ 70-85%
- âœ… **å¯æ“ä½œçš„ç»“æœ**: ç²¾ç¡®çš„ä¾èµ–åˆ†æã€å‡†ç¡®çš„æ­»ä»£ç æ£€æµ‹
- âœ… **å¯æ‰©å±•æ€§**: Pass ç³»ç»Ÿå¯å®šåˆ¶ï¼Œæ”¯æŒé¢†åŸŸç‰¹å®šåˆ†æ

## ç”¨æˆ·ä½“éªŒ

- âœ… **è‡ªåŠ¨é›†æˆ**: `executionPath` é»˜è®¤è¿‡æ»¤ä¸å¯è¾¾è¾¹
- âœ… **é€æ˜æ€§**: QueryTree è®°å½•å®Œæ•´æ±‚å€¼è¿‡ç¨‹
- âœ… **è·¨è¯­è¨€**: Java, C++, Python, JavaScript ç­‰

---

# ä¸ä¼ ç»Ÿæ–¹æ³•å¯¹æ¯”

| ç‰¹æ€§ | ä¼ ç»Ÿ AST | CPG |
|------|---------|-----|
| æ§åˆ¶æµåˆ†æ | âš ï¸ åŸºç¡€ | âœ… EOG ç²¾ç¡®å»ºæ¨¡ |
| æ•°æ®æµåˆ†æ | âš ï¸ æœ‰é™ | âœ… DFG å®Œæ•´è¿½è¸ª |
| å¸¸é‡æ±‚å€¼ | âŒ æ—  | âœ… ValueEvaluator |
| åˆ†æ”¯å‰ªæ | âŒ æ—  | âœ… UnreachableEOGPass |
| æŸ¥è¯¢èƒ½åŠ› | âš ï¸ æ‰‹åŠ¨ç¼–å†™ | âœ… Query DSL |
| ç²¾åº¦ | ä½ (è¿‡åº¦è¿‘ä¼¼) | é«˜ (ç²¾ç¡®) |
| è¯¯æŠ¥ç‡ | é«˜ | ä½ (å‡å°‘ 70-85%) |

**ç»“è®º**: CPG é€šè¿‡å¤šå±‚å›¾ä¸ååŒåˆ†æï¼Œè¾¾åˆ°ä¼ ç»Ÿ AST æ— æ³•ä¼åŠçš„ç²¾åº¦

---

# æœªæ¥å·¥ä½œä¸ç ”ç©¶æ–¹å‘

## çŸ­æœŸå¢å¼º (2-4 å‘¨)

- âœ… æ·»åŠ  SwitchStatement æ”¯æŒ (å·²è§„åˆ’)
- âœ… æ‰©å±• ValueEvaluator æ”¯æŒ `&&`, `||`, `!`
- âœ… æ”¹è¿›ä¸‰ç›®è¿ç®—ç¬¦æ±‚å€¼

## ä¸­æœŸæ”¹è¿› (1-2 æœˆ)

- âš ï¸ ç®€å•å‡½æ•°å†…è”æˆ–æ‘˜è¦
- âš ï¸ æ­»ä»£ç æŠ¥å‘Šå™¨ (DeadCodeReporter)
- âš ï¸ æ€§èƒ½ä¼˜åŒ–

## é•¿æœŸç ”ç©¶ (éœ€å•ç‹¬è¯„ä¼°)

- â“ æ‰©å±•åˆ°æ›´å¤šè¯­è¨€ (Rust, Go, ...)
- â“ ç¬¦å·æ‰§è¡Œé›†æˆ
- â“ æœºå™¨å­¦ä¹ è¾…åŠ©æ¨¡å¼è¯†åˆ«
- â“ ä¸Šä¸‹æ–‡æ•æ„Ÿçš„è¿‡ç¨‹é—´å¸¸é‡ä¼ æ’­

---

# å‚è€ƒèµ„æ–™

## Task 1 & 2 æ–‡æ¡£

- ğŸ“„ Java CPG Frontend åˆ†æ (`/claude/result/1/`)
- ğŸ“„ CPG æ ¸å¿ƒå›¾ç»“æ„åˆ†æ (`/claude/result/2/2.graph-and-query-analysis.md`)
- ğŸ“„ ValueEvaluator æ±‚å€¼ç³»ç»Ÿ (`/claude/result/2/2.evaluation-infrastructure.md`)
- ğŸ“„ å¯è¡Œæ€§ä¸è·¯çº¿å›¾ (`/claude/result/2/2.feasibility-and-roadmap.md`)

## CPG èµ„æº

- ğŸ”— GitHub: [Fraunhofer-AISEC/cpg](https://github.com/Fraunhofer-AISEC/cpg)
- ğŸ“– è¯­ä¹‰è®°å¿†: `sem-003` (UnreachableEOGPass), `sem-004` (Query API DSL)

---

<!-- _class: lead -->

# Q&A
## é—®é¢˜ä¸è®¨è®º

**æ„Ÿè°¢è§‚çœ‹ï¼**

**æœ¬æ¼”ç¤ºå±•ç¤ºäº† CPG å¦‚ä½•é€šè¿‡å¸¸é‡æ±‚å€¼ä¸åˆ†æ”¯å‰ªæå®ç°ç²¾ç¡®çš„é™æ€åˆ†æ**

---
