# æ‰§è¡Œæ‘˜è¦ - JavaParser 3.27.0 è¯„ä¼°

**è¯„ä¼°æ—¥æœŸ**: 2025-11-13  
**è¯„ä¼°å¯¹è±¡**: CPG Javaè¯­è¨€å‰ç«¯  
**æ€»å·¥ä½œé‡**: å®Œæ•´æºä»£ç å®¡æŸ¥ (2368è¡Œä»£ç )  
**è¯„ä¼°è¦†ç›–**: Java 11-17ç‰¹æ€§æ”¯æŒæƒ…å†µ  

---

## å¿«é€Ÿæ€»ç»“

CPGä½¿ç”¨**JavaParser 3.27.0**ç‰ˆæœ¬,åœ¨**Java 11**æ”¯æŒæ–¹é¢è¡¨ç°ä¼˜ç§€(95%),ä½†å¯¹**Java 14-17**æ–°ç‰¹æ€§æ”¯æŒä¸¥é‡ä¸è¶³(15-40%)ã€‚

### å…³é”®æŒ‡æ ‡

```
æ€»ä½“æ”¯æŒåº¦: 55% (Java 11-17æ··åˆå¹³å‡)
â”œâ”€ Java 11: 95% âœ… (å®Œå…¨æ”¯æŒ)
â”œâ”€ Java 12-13: 80% âš ï¸ (ç¼ºå°‘Switchè¡¨è¾¾å¼)
â”œâ”€ Java 14-15: 40% âŒ (ç¼ºRecords, Pattern Matching, Sealed)
â”œâ”€ Java 16: 35% âŒ (åŒä¸Š)
â””â”€ Java 17: 15% âŒ (ç¼ºPattern for switch, Sealed)
```

### äº”ä¸ªå¿…é¡»ä¿®å¤çš„é—®é¢˜

| # | ç‰¹æ€§ | ä¸¥é‡ç¨‹åº¦ | å½±å“ | å·¥ä½œé‡ |
|---|-----|---------|-----|--------|
| 1 | Switchè¡¨è¾¾å¼ | ğŸ”´ å…³é”® | æ— æ³•è§£æJava 12+ä»£ç  | 8-12h |
| 2 | Recordså¤„ç† | ğŸ”´ å…³é”® | æ— æ³•å¤„ç†Recordç±»å‹ | 20-30h |
| 3 | Javaç‰ˆæœ¬é…ç½® | ğŸŸ  é«˜ | æ— ç‰ˆæœ¬çº¦æŸæœºåˆ¶ | 2-4h |
| 4 | Pattern Binding | ğŸŸ  é«˜ | instanceofç»‘å®šå˜é‡ä¸¢å¤± | 15-25h |
| 5 | Sealed Classes | ğŸŸ¡ ä¸­ | ç»§æ‰¿çº¦æŸæ— æ³•è¡¨ç¤º | 15-20h |

---

## æ¶æ„è¯„ä¼°

### è®¾è®¡è´¨é‡

**Handleræ¨¡å¼**: âœ… ä¼˜ç§€ (8/10)
- æ¸…æ™°çš„ç±»å‹åˆ†æ´¾æœºåˆ¶
- æ˜“äºæ‰©å±•
- å®Œæ•´çš„ä½œç”¨åŸŸç®¡ç†

**å®ç°å®Œæ•´æ€§**: âš ï¸ ä¸è¶³ (4/10)
- ç¼ºæ–°ç‰¹æ€§å¤„ç†
- Javaç‰ˆæœ¬æ— çº¦æŸ
- æ¨¡å¼åŒ¹é…æ”¯æŒä¸å®Œæ•´

### æ‰©å±•æ€§è¯„ä¼°

```
æ·»åŠ æ–°ç‰¹æ€§éœ€è¦:
1. è¯†åˆ«ASTèŠ‚ç‚¹ç±»å‹ (JavaParseræä¾›)
2. ç¼–å†™å¤„ç†å‡½æ•° (10-50è¡Œä»£ç )
3. æ³¨å†Œåˆ°map (1è¡Œä»£ç )
4. æ·»åŠ å•å…ƒæµ‹è¯•

å¤æ‚åº¦: ä½-ä¸­ç­‰
æ‰€éœ€çŸ¥è¯†: Kotlin + æ¶æ„ç†è§£
```

---

## è¯¦ç»†å‘ç°

### å·²å®Œæ•´æ”¯æŒ âœ…

| ç‰¹æ€§ | ç‰ˆæœ¬ | ä½ç½® | å®Œæ•´åº¦ |
|-----|-----|-----|--------|
| Lambdaè¡¨è¾¾å¼ | 8+ | ExpressionHandler:52-76 | 100% |
| Varå…³é”®å­— | 10+ | JavaLanguageFrontend:248-250 | 100% |
| ä¼ ç»ŸSwitch | 3+ | StatementHandler:410-446 | 100% |
| Text Blocks | 15+ | ExpressionHandler:284-288 | 100% (è‡ªåŠ¨) |
| åŒ¿åç±» | 1+ | ExpressionHandler:588-624 | 100% |
| åµŒå¥—ç±» | 1+ | DeclarationHandler:214-231 | 100% |

### éƒ¨åˆ†æ”¯æŒ âš ï¸

| ç‰¹æ€§ | ç‰ˆæœ¬ | ä½ç½® | å®Œæ•´åº¦ | ç¼ºå¤± |
|-----|-----|-----|--------|------|
| Instanceof | 14+ | ExpressionHandler:390-412 | 40% | Pattern binding |

### å®Œå…¨ç¼ºå¤± âŒ

| ç‰¹æ€§ | ç‰ˆæœ¬ | åŸå›  |
|-----|-----|------|
| Switchè¡¨è¾¾å¼ | 12+ | æ— handleSwitchExpr(), æ— mapæ˜ å°„ |
| Records | 14+ | æ— handleRecordDeclaration(), æ— å¤„ç†é€»è¾‘ |
| Pattern Binding | 14+ | æ— getPattern()è°ƒç”¨ |
| Sealed Classes | 15+ | æ— sealed/permitså¤„ç† |
| Pattern for switch | 17+ | æ— Switchè¡¨è¾¾å¼æ”¯æŒ |

---

## ä»£ç ä½ç½®æ€»è§ˆ

### ä¸»è¦æ–‡ä»¶

```
JavaLanguageFrontend.kt (563è¡Œ)
â”œâ”€ ParserConfiguration (è¡Œ109) - âŒ æ— Javaç‰ˆæœ¬è®¾ç½®
â”œâ”€ typeOf() (è¡Œ513-537) - âœ… ç±»å‹å¤„ç†å®Œæ•´
â””â”€ getTypeAsGoodAsPossible() (è¡Œ242-256) - âœ… Varå¤„ç†å®Œæ•´

ExpressionHandler.kt (669è¡Œ)
â”œâ”€ handleLambdaExpr() (è¡Œ52-76) - âœ… å®Œæ•´
â”œâ”€ handleInstanceOfExpression() (è¡Œ390-412) - âš ï¸ éƒ¨åˆ†
â”œâ”€ initå— (è¡Œ634-667) - âŒ ç¼ºSwitchExpræ˜ å°„
â””â”€ [ç¼º] handleSwitchExpr() - âŒ æ–¹æ³•ä¸å­˜åœ¨

StatementHandler.kt (619è¡Œ)
â”œâ”€ handleSwitchStatement() (è¡Œ410-446) - âœ… å®Œæ•´ (ä¼ ç»Ÿswitch)
â”œâ”€ initå— (è¡Œ552-618) - âŒ ç¼ºSwitchExpræ˜ å°„
â””â”€ [ç¼º] handleSwitchExpr() - âŒ æ–¹æ³•ä¸å­˜åœ¨

DeclarationHandler.kt (517è¡Œ)
â”œâ”€ handleClassOrInterfaceDeclaration() (è¡Œ173-212) - âš ï¸ ç¼ºsealedå¤„ç†
â”œâ”€ processRecordMembers() (è¡Œ328-387) - âŒ Recordsè½å…¥elseåˆ†æ”¯
â”œâ”€ initå— (è¡Œ493-516) - âŒ ç¼ºRecordDeclarationæ˜ å°„
â””â”€ [ç¼º] handleRecordDeclaration() - âŒ æ–¹æ³•ä¸å­˜åœ¨
```

---

## ä¿®å¤å»ºè®® (ä¼˜å…ˆçº§)

### P0: ç«‹å³ä¿®å¤ (1-2å‘¨)

**1. Javaç‰ˆæœ¬é…ç½®** (2-4å°æ—¶)

ä½ç½®: JavaLanguageFrontend.kt:109

```kotlin
// æ·»åŠ :
parserConfiguration.setLanguageLevel(LanguageLevel.JAVA_17)
```

**2. Switchè¡¨è¾¾å¼** (8-12å°æ—¶)

ä½ç½®: ExpressionHandler.kt

- æ·»åŠ handleSwitchExpr()æ–¹æ³•
- æ³¨å†Œåˆ°initå—çš„map
- æ·»åŠ å•å…ƒæµ‹è¯•

### P1: é‡è¦åŠŸèƒ½ (1-2å‘¨)

**3. Recordså®Œæ•´å¤„ç†** (20-30å°æ—¶)

ä½ç½®: DeclarationHandler.kt

- æ·»åŠ handleRecordDeclaration()æ–¹æ³•
- å¤„ç†componentå­—æ®µ
- å¤„ç†ç´§å‡‘æ„é€ å™¨
- æ›´æ–°processRecordMembers()

**4. Pattern Binding** (15-25å°æ—¶)

ä½ç½®: ExpressionHandler.kt

- ä¿®æ”¹handleInstanceOfExpression()
- è°ƒç”¨getPattern()æå–ç»‘å®šå˜é‡
- åˆ›å»ºPatternBindingèŠ‚ç‚¹

### P2: é•¿æœŸè§„åˆ’ (2-4å‘¨)

**5. Sealed Classes** (15-20å°æ—¶)

ä½ç½®: DeclarationHandler.kt:173-212

- æ·»åŠ sealedä¿®é¥°ç¬¦å¤„ç†
- å¤„ç†permitså­å¥

**6. Pattern for switch** (40-60å°æ—¶)

ä½ç½®: StatementHandler.kt + ExpressionHandler.kt

- å®ç°å®Œæ•´çš„SwitchExpræ”¯æŒ
- æ·»åŠ guardè¡¨è¾¾å¼å¤„ç†

---

## æˆæœ¬æ•ˆç›Šåˆ†æ

### å®Œæˆæ—¶é—´

```
P0ç‰¹æ€§: 10-16å°æ—¶    (1-2å¤©)
P1ç‰¹æ€§: 35-55å°æ—¶    (1-2å‘¨)
P2ç‰¹æ€§: 55-80å°æ—¶    (2-3å‘¨)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åˆè®¡: 100-151å°æ—¶  (2.5-4å‘¨)

åŒ…å«æµ‹è¯•ã€ä»£ç å®¡æŸ¥ã€æ–‡æ¡£
```

### å®Œæˆåçš„æ”¶ç›Š

```
ç°çŠ¶:
- Java 14-17ä»£ç éƒ¨åˆ†æ— æ³•è§£æ
- ä¸¢å¤±é‡è¦ç‰¹æ€§ä¿¡æ¯
- åˆ†æèƒ½åŠ›å—é™

æ”¹è¿›å:
- å®Œæ•´Java 17æ”¯æŒ
- æ— ä¿¡æ¯ä¸¢å¤±
- åˆ†æèƒ½åŠ›æå‡
```

---

## é£é™©è¯„ä¼°

### å‡çº§JavaParserçš„é£é™©

**å½“å‰ç‰ˆæœ¬**: 3.27.0  
**ç ´åæ€§å˜æ›´é£é™©**: ä½ âœ…

- JavaParseréµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬
- 3.27.xç³»åˆ—APIç¨³å®š
- ç¬¦å·è§£æå™¨æ¥å£ä¸å˜

### ä»£ç ä¿®æ”¹çš„é£é™©

**å¤æ‚åº¦**: ä¸­ç­‰  
**é£é™©ç¼“è§£**:
1. å……åˆ†çš„å•å…ƒæµ‹è¯•è¦†ç›–
2. åå‘å…¼å®¹æ€§ä¿è¯
3. å¢é‡å¼å®æ–½

---

## æ¯”è¾ƒåˆ†æ

### vs. Javaå®˜æ–¹ç¼–è¯‘å™¨

```
CPG (å½“å‰)          Javaç¼–è¯‘å™¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Lambda: âœ…            âœ…
Var: âœ…              âœ…
Switchè¡¨è¾¾å¼: âŒ      âœ… (Java 14+)
Records: âš ï¸ (ç¼º)      âœ… (Java 16+)
Pattern: âš ï¸ (éƒ¨åˆ†)    âœ… (Java 14+)
Sealed: âŒ           âœ… (Java 15+)
```

### vs. å…¶ä»–JavaParserç”¨æˆ·

```
å¤§å¤šæ•°ç”¨æˆ·éœ€æ±‚:
- Java 8-11: å®Œå…¨è¦†ç›– âœ…
- Java 12-13: 95%è¦†ç›– âœ…
- Java 14+: éœ€è¦æ”¹è¿› âš ï¸

CPGç‰¹æ®Šéœ€æ±‚:
- ç²¾ç¡®çš„ASTè¡¨ç¤º (ä¸ä»…ä»…è§£æ)
- å®Œæ•´çš„ç‰¹æ€§å¤„ç†
- ç±»å‹ä¿¡æ¯ä¿ç•™
```

---

## åç»­æ­¥éª¤

### ç«‹å³è¡ŒåŠ¨

1. **ç¡®è®¤ä¼˜å…ˆçº§**: ä¸å›¢é˜Ÿç¡®è®¤P0-P2çš„ä¼˜å…ˆçº§é¡ºåº
2. **åˆ†é…èµ„æº**: åˆ†é…å¼€å‘äººå‘˜è´Ÿè´£ä¸åŒç‰¹æ€§
3. **åˆ›å»ºä»»åŠ¡**: ä¸ºæ¯ä¸ªç‰¹æ€§åˆ›å»ºç‹¬ç«‹çš„ä»»åŠ¡

### æ‰§è¡Œæ­¥éª¤

1. **P0ç‰¹æ€§** (ç¬¬1å‘¨)
   - æ·»åŠ Javaç‰ˆæœ¬é…ç½®
   - å®ç°Switchè¡¨è¾¾å¼

2. **P1ç‰¹æ€§** (ç¬¬2-3å‘¨)
   - Recordså®Œæ•´å¤„ç†
   - Pattern Binding

3. **P2ç‰¹æ€§** (ç¬¬4å‘¨+)
   - Sealed Classes
   - Pattern for switch

### æµ‹è¯•ç­–ç•¥

```
æ¯ä¸ªç‰¹æ€§éœ€è¦:
1. å•å…ƒæµ‹è¯• (åŸºç¡€åŠŸèƒ½)
2. é›†æˆæµ‹è¯• (ä¸å…¶ä»–ç‰¹æ€§åä½œ)
3. å›å½’æµ‹è¯• (ç¡®ä¿å‘åå…¼å®¹)
4. æ€§èƒ½æµ‹è¯• (ç¡®ä¿æ— æ€§èƒ½é€€åŒ–)
```

ä½ç½®: `/cpg-language-java/src/test/kotlin/`

---

## å…³é”®ç»Ÿè®¡

### ä»£ç å®¡æŸ¥

- å®¡æŸ¥æ–‡ä»¶: 4ä¸ªHandleræ–‡ä»¶
- ä»£ç è¡Œæ•°: 2368è¡Œ
- å¤„ç†å‡½æ•°: 21ä¸ª
- Handleræ˜ å°„: 18ä¸ª (ExpressionHandler) + 15ä¸ª (StatementHandler) + 6ä¸ª (DeclarationHandler)

### ç‰¹æ€§è¦†ç›–

- å®Œå…¨æ”¯æŒ: 6é¡¹ (Lambda, Var, Switch, Text Blocks, åŒ¿åç±», åµŒå¥—ç±»)
- éƒ¨åˆ†æ”¯æŒ: 1é¡¹ (Instanceof)
- å®Œå…¨ç¼ºå¤±: 5é¡¹ (Switchè¡¨è¾¾å¼, Records, Pattern Binding, Sealed, Pattern for switch)

### æ–‡æ¡£å®Œæ•´æ€§

- å·²ç”Ÿæˆæ–‡æ¡£: 3ä»½
  - 01: ç»¼åˆè¯„ä¼° (816è¡Œ)
  - 02: ä»£ç è¯æ® (745è¡Œ)
  - 03: æ‰§è¡Œæ‘˜è¦ (æ­¤æ–‡)

---

## ç»“è®º

CPGçš„Javaå‰ç«¯æ¶æ„**è®¾è®¡ä¼˜ç§€,å¯æ‰©å±•æ€§å¼º**,ä½†**ç¼ºä¹å¯¹Java 14-17æ–°ç‰¹æ€§çš„å¤„ç†**ã€‚é€šè¿‡2.5-4å‘¨çš„æœ‰åºå¼€å‘,å¯ä»¥å®Œå…¨è§£å†³è¿™äº›é™åˆ¶,è¾¾åˆ°**Java 17å®Œå…¨æ”¯æŒ**çš„ç›®æ ‡ã€‚

**å»ºè®®**: ä»P0ç‰¹æ€§å¼€å§‹,å¾ªåºæ¸è¿›åœ°å®Œæˆæ‰€æœ‰æ”¹è¿›,ç¡®ä¿å……åˆ†çš„æµ‹è¯•è¦†ç›–å’Œå‘åå…¼å®¹æ€§ã€‚

---

**æŠ¥å‘Šå®Œæˆæ—¥æœŸ**: 2025-11-13  
**è¯„ä¼°ç­‰çº§**: A (æ¶æ„) / C (å®ç°å®Œæ•´æ€§)  
**å»ºè®®**: ä¼˜å…ˆçº§æ”¹è¿›å¯è¡Œ,é¢„è®¡4å‘¨å®Œæˆ

