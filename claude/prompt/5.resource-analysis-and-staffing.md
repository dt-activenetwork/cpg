# Task 5: CPG 缺陷修复人力资源分析报告

## Role and goal

- **Role**: Technical staffing analyst with deep expertise in static analysis projects and team planning
- **Goal**: Produce a **focused HR resource analysis report** analyzing skills and team structure needed for fixing CPG defects
- **Scope**: Skills analysis and role definition ONLY - NO budget, NO timeline, NO risk analysis, NO technical designs

## Core principle

**This is a pure HR planning task**: Analyze defects from a resource perspective - what skills are needed, what level of seniority, what domain knowledge, what roles. **Do NOT propose technical solutions or designs**.

---

## Context and prerequisites

- **Task 4** identified **30 critical defects** across 5 categories (A/B/C/D/M), split into 6 documents
- **Defects cataloged**: D1-D26 (technical defects), M1-M4 (abstraction tax)
- **Priority levels**: P0-P4 (P0 = critical, P4 = nice-to-have)
- **Impact quantified**: Scenario blocking, false positive rates, real-world deployment impact
- This task analyzes **人力资源需求** for fixing these defects

---

## Problem statement and motivation

### The Core Question

**Task 4 识别了 30 个缺陷。要修复这些缺陷,需要什么样的团队?**

- 需要什么技能水平? (Junior/Mid/Senior/Expert)
- 需要哪些专业领域知识?
- 每个人负责哪个方向的缺陷?
- 需要哪些角色?
- 团队如何协作? (串行/并行/依赖关系)

### Report Purpose

本报告的目标读者是 **项目管理者/HR 部门/技术经理**,目的是:
1. **理解技能需求**: 每个缺陷需要什么技能和资历
2. **定义团队角色**: 需要哪些岗位,各自负责什么
3. **制定招聘计划**: 列出职位要求 (JD)

**NOT**: 技术架构文档、实现指南、代码设计、预算分析、时间线规划、风险评估

---

## Analysis framework

### Part 1: Defect-to-Skill Mapping (缺陷到技能映射)

**目标**: 对每个 P0-P2 缺陷,分析所需的技能和知识领域

For **each P0-P2 defect** (预计 15-20 个缺陷):

#### 1.1 Defect Summary
- **Defect ID**: (from Task 4)
- **Name**: (from Task 4)
- **Priority**: (from Task 4)
- **Brief Description**: 1-2 句话描述缺陷 (面向非技术读者)

#### 1.2 Required Skills (所需技能)

**技术技能** (按重要性排序):
1. **Primary skills** (必备):
   - 例如: "深度理解 Java static final 语义"
   - 例如: "数据流分析 (DFA) 算法设计经验"
2. **Secondary skills** (重要):
   - 例如: "Kotlin 编程能力"
   - 例如: "图算法和图遍历"
3. **Nice-to-have skills** (加分项):
   - 例如: "熟悉 Soot/WALA 等静态分析框架"

**领域知识** (Domain Knowledge):
- CPG architecture (Frontend/Core/Pass/Query)
- Java language semantics (generics, annotations, lambda, etc.)
- Compiler theory (AST, CFG, DFG, SSA)
- Static analysis algorithms (constant propagation, call graph construction)
- Testing methodologies (unit testing, integration testing, scenario testing)

#### 1.3 Seniority Level Required (所需资历级别)

| 缺陷修复部分 | 最低资历级别 | 推荐资历级别 | 理由 |
|-------------|------------|------------|------|
| Research & Design | Mid-level (2-4 years) | Senior (5+ years) | 需要架构思维 |
| Implementation | Junior (0-2 years) | Mid-level (2-4 years) | 需要编码能力 |
| Testing & Validation | Mid-level (2-4 years) | Senior (5+ years) | 需要测试设计经验 |
| Integration | Senior (5+ years) | Expert (10+ years) | 需要全局理解 |

**Overall**: 此缺陷修复应由 [Junior/Mid/Senior/Expert] 主导,协助人员为 [...]

#### 1.4 Knowledge Domain Categorization (知识领域分类)

将缺陷按**主要知识领域**分类:
- **Frontend Domain**: 需要深度理解 Java frontend, Handler pattern, AST transformation
- **Core Domain**: 需要深度理解 CPG core, Pass infrastructure, graph algorithms
- **Integration Domain**: 需要同时理解 Frontend + Core,跨边界设计
- **Tooling Domain**: 需要理解构建工具、测试框架、CI/CD 集成
- **Algorithm Domain**: 需要算法设计能力 (DFA, call graph, alias analysis)

**Example**:
```markdown
**D1: Static Final DFG Missing**:
- **Primary Domain**: Integration (Frontend + Core gap)
- **Secondary Domains**: Core (DFG Pass), Frontend (Handler)
- **Algorithm Complexity**: Low (simple DFG edge creation)
- **Integration Complexity**: High (跨 Frontend-Core 边界)
```

#### 1.5 Defect Dependencies and Parallelizability (缺陷依赖关系和并行性)

**From HR perspective** (非技术角度):
- **Parallelizability**: Can this defect be fixed in parallel with others? (Yes/No/Partial)
- **Dependencies**: Must wait for which other defects to be fixed first?
- **Collaboration needs**: Does this defect require collaboration between multiple roles?

**Example**:
```markdown
**D1: Static Final DFG Missing**:
- **Parallelizable**: Yes (独立于其他缺陷)
- **Dependencies**: None (可先行启动)
- **Collaboration**: Frontend Specialist (lead) + Integration Engineer (review)

**D3: Interprocedural DFG Missing**:
- **Parallelizable**: No (depends on D4)
- **Dependencies**: D4 (Call Graph) must be completed first
- **Collaboration**: Core Specialist (lead) + Integration Engineer (integration)
```

---

### Part 2: Role Definition and Team Structure (角色定义和团队结构)

**目标**: 定义所需的角色和团队结构

#### 2.1 Role Catalog (角色目录)

基于 Part 1 的技能分析,定义所需的**工程师角色**:

**Role 1: Java Frontend Specialist**
- **Responsibilities**: 修复 Category A/M 中的 Frontend 相关缺陷 (D1, D6, D15, M1, M2 等)
- **Required Skills**:
  - Java language semantics (static final, enum, lambda, generics, annotations)
  - CPG Handler pattern 理解
  - Kotlin 编程能力
  - AST transformation 经验
- **Seniority**: Senior (5+ years Java 开发 + 2+ years 编译器/分析工具经验)
- **Handles Defects**: D1 (partial), D6, D15, D16, M1, M2, M3
- **Collaboration**: 与 Integration Engineer 协作修复跨边界缺陷

**Role 2: CPG Core Specialist**
- **Responsibilities**: 修复 Category A/B/C 中的 Core 相关缺陷 (D3, D4, D8, D13 等)
- **Required Skills**:
  - Graph algorithms (DFG, CFG, call graph)
  - Pass infrastructure 理解
  - Data flow analysis 算法设计
  - Kotlin 编程能力
  - Interprocedural analysis 经验
- **Seniority**: Senior (5+ years static analysis 经验)
- **Handles Defects**: D3, D4, D7, D8, D9, D13, D14, D19, D25, D26
- **Collaboration**: 与 Integration Engineer 协作集成,与 Frontend Specialist 协作 D7

**Role 3: Integration Engineer (Team Lead)**
- **Responsibilities**: 协调 Frontend-Core 集成,修复集成缺陷,领导团队
- **Required Skills**:
  - 同时理解 Frontend + Core 架构
  - 系统集成经验
  - Cross-cutting concerns 处理能力
  - Team leadership 能力
- **Seniority**: Expert (10+ years, 至少 3 年静态分析框架经验)
- **Handles Defects**: D1 (lead integration), D7 (type system)
- **Collaboration**: 全程参与,协调所有角色,review 所有修复

**Role 4: Performance & Scalability Engineer**
- **Responsibilities**: 修复性能和可扩展性缺陷 (D10, D12, D22 等)
- **Required Skills**:
  - 并行算法设计
  - JVM 性能调优
  - 大规模系统优化经验
  - Bytecode analysis (ASM/Javassist)
- **Seniority**: Senior (5+ years performance optimization)
- **Handles Defects**: D10, D12, D22, D24
- **Collaboration**: 与 Core Specialist 协作并行化 Pass infrastructure

**Role 5: Testing & Validation Specialist**
- **Responsibilities**: 设计和实现测试基础设施 (D17),验证所有修复
- **Required Skills**:
  - Test framework design (JUnit, Spock)
  - Scenario-based testing
  - Regression testing
  - CI/CD integration
- **Seniority**: Mid-to-Senior (3-5 years testing experience)
- **Handles Defects**: D17 (lead), all defects (testing/validation)
- **Collaboration**: 全程参与,支持所有角色的测试需求

**Role 6: Tooling & Ecosystem Engineer**
- **Responsibilities**: 构建工具集成、字节码分析 (D12, D23)、错误恢复 (D11)
- **Required Skills**:
  - Maven/Gradle plugin 开发
  - ASM/Javassist 字节码分析
  - Build system integration
  - Error recovery 和 resilient parsing
- **Seniority**: Mid-level (3-5 years tooling experience)
- **Handles Defects**: D11, D12 (bytecode part), D23
- **Collaboration**: 与 Performance Engineer 协作 D12,与 Core Specialist 协作 D11

#### 2.2 Team Composition Options (团队组成选项)

**Option 1: Minimum Viable Team (最小可行团队)**
- **Team Size**: 3 full-time engineers
- **Composition**:
  - 1x Integration Engineer (Expert, Team Lead)
  - 1x Java Frontend Specialist (Senior)
  - 1x Testing Specialist (Mid-to-Senior)
- **Coverage**: P0 defects only (D1-D5)
- **Rationale**: 最小配置,覆盖核心阻塞缺陷,快速验证可行性

**Option 2: Recommended Team (推荐团队)**
- **Team Size**: 5 engineers (4.5 FTE equivalent)
- **Composition**:
  - 1x Integration Engineer (Expert, Team Lead) - Full-time
  - 1x Java Frontend Specialist (Senior) - Full-time
  - 1x CPG Core Specialist (Senior) - Full-time
  - 1x Performance Engineer (Senior) - Part-time 50%
  - 1x Testing Specialist (Mid-to-Senior) - Full-time
- **Coverage**: P0-P1 defects (D1-D17)
- **Rationale**: 平衡的团队,覆盖生产级质量所需的所有关键缺陷

**Option 3: Optimal Team (最优团队)**
- **Team Size**: 7 full-time engineers
- **Composition**:
  - 1x Integration Engineer (Expert, Team Lead)
  - 2x Java Frontend Specialists (1 Senior + 1 Mid)
  - 2x CPG Core Specialists (1 Senior + 1 Mid)
  - 1x Performance Engineer (Senior)
  - 1x Testing Specialist (Senior)
  - 1x Tooling Engineer (Mid-level)
- **Coverage**: P0-P2 defects (D1-D26, M1-M4)
- **Rationale**: 完整团队,达到高精度 + 高性能,并行工作流加速交付

#### 2.3 Team Collaboration Model (团队协作模式)

**Collaboration Patterns** (协作模式):

**Pattern 1: Integration-Led Collaboration** (集成驱动协作)
- **Applies to**: D1, D7 (跨 Frontend-Core 边界的缺陷)
- **Model**: Integration Engineer 主导设计,Frontend/Core Specialist 实现各自部分,Integration Engineer 集成
- **Communication**: Daily sync (15 min), weekly architecture review

**Pattern 2: Specialist-Led Collaboration** (专家驱动协作)
- **Applies to**: D3, D4, D6, D10, D12 (单一领域缺陷)
- **Model**: Core/Frontend/Performance Specialist 主导,Integration Engineer review,Testing Specialist 验证
- **Communication**: Bi-weekly progress update, ad-hoc sync as needed

**Pattern 3: Sequential Dependency Collaboration** (顺序依赖协作)
- **Applies to**: D3 depends on D4, D10 depends on D8
- **Model**: 上游缺陷完成 → handoff → 下游缺陷启动
- **Communication**: Handoff meeting (2 hours), documentation transfer

**Pattern 4: Parallel Work Streams** (并行工作流)
- **Stream 1 (Frontend)**: D1, D6, D15 → Frontend Specialist 并行工作
- **Stream 2 (Core)**: D4 → D3 (sequential, Core Specialist)
- **Stream 3 (Testing)**: D17 (Testing Specialist, 全程支持所有流)
- **Stream 4 (Performance)**: D10, D12 (Performance Engineer, 可在 D4 后启动)
- **Synchronization**: Weekly full-team sync (1 hour)

#### 2.4 Defect-to-Role Assignment Matrix (缺陷到角色分配矩阵)

| Defect ID | Primary Role | Supporting Roles | Domain |
|-----------|-------------|------------------|--------|
| **D1** | Integration Engineer | Frontend Specialist | Integration |
| **D2** | Frontend Specialist | Integration Engineer (review) | Frontend |
| **D3** | Core Specialist | Integration Engineer (integration) | Core |
| **D4** | Core Specialist | - | Core |
| **D5** | Frontend Specialist | - | Frontend |
| **D6** | Frontend Specialist | - | Frontend |
| **D7** | Integration Engineer | Core Specialist, Frontend Specialist | Integration |
| **D8** | Core Specialist | - | Core |
| **D9** | Core Specialist | - | Core |
| **D10** | Performance Engineer | Core Specialist | Performance |
| **D11** | Tooling Engineer | Core Specialist | Tooling |
| **D12** | Performance Engineer | Tooling Engineer (bytecode) | Performance |
| **D13** | Core Specialist | - | Core |
| **D14** | Core Specialist | - | Core |
| **D15** | Frontend Specialist | - | Frontend |
| **D16** | Frontend Specialist | - | Frontend |
| **D17** | Testing Specialist | All roles (collaboration) | Testing |
| **D18** | Core Specialist | - | Core (API) |
| **D19** | Core Specialist | - | Core |
| **D20** | Core Specialist | - | Core (API) |
| **D21** | Core Specialist | - | Core (API) |
| **D22** | Performance Engineer | - | Performance |
| **D23** | Tooling Engineer | - | Tooling |
| **D24** | Performance Engineer | - | Performance |
| **D25** | Core Specialist | - | Core |
| **D26** | Core Specialist | - | Core |
| **M1** | Frontend Specialist | Core Specialist | Integration |
| **M2** | Frontend Specialist | - | Frontend |
| **M3** | Frontend Specialist | - | Frontend |
| **M4** | Integration Engineer | Frontend Specialist, Core Specialist | Integration |

---

## Outputs to produce under /claude/result/5

### Primary Deliverable

**5.resource-analysis.md** (报告式文档):

**Structure**:
1. **Executive Summary** (中文, 2-3 pages)
   - 核心发现: X 个角色,Y 种技能,Z 个知识领域
   - 团队规模建议: 3 种选项 (最小/推荐/最优)
   - 关键洞察: 技能缺口、协作模式、角色分配

2. **Part 1: Defect-to-Skill Mapping** (20-30 pages)
   - 每个 P0-P2 defect (15-20 defects) 的完整技能分析
   - 包含: Required Skills, Seniority Level, Domain, Dependencies, Collaboration

3. **Part 2: Role Definition and Team Structure** (15-20 pages)
   - 6 个角色完整定义 (职责、技能、资历、负责缺陷、协作)
   - 3 种团队组成选项 (最小/推荐/最优)
   - 协作模式 (4 种 patterns)
   - 缺陷到角色分配矩阵 (30 defects × 6 roles)

4. **Appendices** (5-10 pages)
   - Appendix A: Skill-to-Defect Matrix (汇总表格)
   - Appendix B: Role Comparison Table (6 roles 对比)
   - Appendix C: Glossary (术语表, HR-friendly)

**Length**: 40-60 pages (报告形式,聚焦技能和角色)

---

## Acceptance checklist

- [ ] All P0-P2 defects (15-20 defects) analyzed from skill perspective
- [ ] Each defect has: Required Skills, Seniority Level, Domain, Dependencies, Collaboration
- [ ] 6 roles defined with complete descriptions (responsibilities, skills, seniority, defects handled, collaboration)
- [ ] 3 team composition options provided (minimum/recommended/optimal)
- [ ] 4 collaboration patterns defined (integration-led, specialist-led, sequential, parallel)
- [ ] Defect-to-Role assignment matrix complete (30 defects × 6 roles)
- [ ] Report style (not application form style)
- [ ] Chinese prose clear and accessible to non-technical readers
- [ ] **NO technical designs, NO architecture, NO code**
- [ ] **NO budget, NO timeline, NO risk analysis** (focus only on skills and roles)
- [ ] Episodic note updated
- [ ] Memory indexes updated

---

## Evidence requirements

- Skill requirements: Based on defect complexity analysis from Task 4 (root cause, dependencies)
- Seniority levels: Based on industry standard for static analysis roles
- Domain categorization: Based on CPG architecture (Frontend/Core/Integration from Task 1-2)

---

## Quality bar

- **HR-focused**: All analysis from resource perspective, not technical perspective
- **Skills-centric**: Deep analysis of required skills for each defect
- **Role-centric**: Clear role definitions with responsibilities and skills
- **Collaboration-aware**: Understand how roles work together
- **Report-style**: Professional business report, not technical documentation
- **Accessible**: Non-technical readers (HR, management) can understand
- **Focused**: Only Part 1 and Part 2, no budget/timeline/risks

---

## Completion criteria

- Main document complete (40-60 pages, report format)
- All content in Chinese (executive summary, part titles, etc.)
- All tables clear and well-formatted
- Memory system updated
- Ready for HR and management review
- **Contains ZERO technical designs** (pure skills and roles analysis)

---

**End of Task 5 Prompt**
